

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Filesystem / Cloud Storage &mdash; Laravel 5 Documentation 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Laravel 5 Documentation 1.0 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Laravel 5 Documentation
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <!-- Local TOC -->
                <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Filesystem / Cloud Storage</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#configuration">Configuration</a><ul>
<li><a class="reference internal" href="#the-local-driver">The Local Driver</a></li>
<li><a class="reference internal" href="#other-driver-prerequisites">Other Driver Prerequisites</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-usage">Basic Usage</a><ul>
<li><a class="reference internal" href="#obtaining-disk-instances">Obtaining Disk Instances</a></li>
<li><a class="reference internal" href="#retrieving-files">Retrieving Files</a><ul>
<li><a class="reference internal" href="#file-meta-information">File Meta Information</a></li>
</ul>
</li>
<li><a class="reference internal" href="#storing-files">Storing Files</a><ul>
<li><a class="reference internal" href="#prepending-appending-to-files">Prepending / Appending To Files</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deleting-files">Deleting Files</a></li>
<li><a class="reference internal" href="#directories">Directories</a><ul>
<li><a class="reference internal" href="#get-all-files-within-a-directory">Get All Files Within A Directory</a></li>
<li><a class="reference internal" href="#get-all-directories-within-a-directory">Get All Directories Within A Directory</a></li>
<li><a class="reference internal" href="#create-a-directory">Create A Directory</a></li>
<li><a class="reference internal" href="#delete-a-directory">Delete A Directory</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#custom-filesystems">Custom Filesystems</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Laravel 5 Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Filesystem / Cloud Storage</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/filesystem.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="filesystem-cloud-storage">
<span id="filesystem-cloud-storage"></span><h1>Filesystem / Cloud Storage<a class="headerlink" href="#filesystem-cloud-storage" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="#introduction">Introduction</a></li>
<li><a class="reference external" href="#configuration">Configuration</a></li>
<li><a class="reference external" href="#basic-usage">Basic Usage</a><ul>
<li><a class="reference external" href="#obtaining-disk-instances">Obtaining Disk Instances</a></li>
<li><a class="reference external" href="#retrieving-files">Retrieving Files</a></li>
<li><a class="reference external" href="#storing-files">Storing Files</a></li>
<li><a class="reference external" href="#deleting-files">Deleting Files</a></li>
<li><a class="reference external" href="#directories">Directories</a></li>
</ul>
</li>
<li><a class="reference external" href="#custom-filesystems">Custom Filesystems</a></li>
</ul>
<p><a name="introduction"></a></p>
<div class="section" id="introduction">
<span id="introduction"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Laravel provides a powerful filesystem abstraction thanks to the wonderful <a class="reference external" href="https://github.com/thephpleague/flysystem">Flysystem</a> PHP package by Frank de Jonge. The Laravel Flysystem integration provides simple to use drivers for working with local filesystems, Amazon S3, and Rackspace Cloud Storage. Even better, it&#8217;s amazingly simple to switch between these storage options as the API remains the same for each system.</p>
<p><a name="configuration"></a></p>
</div>
<div class="section" id="configuration">
<span id="configuration"></span><h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>The filesystem configuration file is located at <code class="docutils literal"><span class="pre">config/filesystems.php</span></code>. Within this file you may configure all of your &#8220;disks&#8221;. Each disk represents a particular storage driver and storage location. Example configurations for each supported driver is included in the configuration file. So, simply modify the configuration to reflect your storage preferences and credentials.</p>
<p>Of course, you may configure as many disks as you like, and may even have multiple disks that use the same driver.</p>
<div class="section" id="the-local-driver">
<span id="the-local-driver"></span><h3>The Local Driver<a class="headerlink" href="#the-local-driver" title="Permalink to this headline">¶</a></h3>
<p>When using the <code class="docutils literal"><span class="pre">local</span></code> driver, note that all file operations are relative to the <code class="docutils literal"><span class="pre">root</span></code> directory defined in your configuration file. By default, this value is set to the <code class="docutils literal"><span class="pre">storage/app</span></code> directory. Therefore, the following method would store a file in <code class="docutils literal"><span class="pre">storage/app/file.txt</span></code>:</p>
<pre class="literal-block">
Storage::disk('local')-&gt;put('file.txt', 'Contents');
</pre>
</div>
<div class="section" id="other-driver-prerequisites">
<span id="other-driver-prerequisites"></span><h3>Other Driver Prerequisites<a class="headerlink" href="#other-driver-prerequisites" title="Permalink to this headline">¶</a></h3>
<p>Before using the S3 or Rackspace drivers, you will need to install the appropriate package via Composer:</p>
<ul class="simple">
<li>Amazon S3: <code class="docutils literal"><span class="pre">league/flysystem-aws-s3-v3</span> <span class="pre">~1.0</span></code></li>
<li>Rackspace: <code class="docutils literal"><span class="pre">league/flysystem-rackspace</span> <span class="pre">~1.0</span></code></li>
</ul>
<p><a name="basic-usage"></a></p>
</div>
</div>
<div class="section" id="basic-usage">
<span id="basic-usage"></span><h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p><a name="obtaining-disk-instances"></a></p>
<div class="section" id="obtaining-disk-instances">
<span id="obtaining-disk-instances"></span><h3>Obtaining Disk Instances<a class="headerlink" href="#obtaining-disk-instances" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">Storage</span></code> facade may be used to interact with any of your configured disks. For example, you may use the <code class="docutils literal"><span class="pre">put</span></code> method on the facade to store an avatar on the default disk. If you call methods on the <code class="docutils literal"><span class="pre">Storage</span></code> facade without first calling the <code class="docutils literal"><span class="pre">disk</span></code> method, the method call will automatically be passed to the default disk:</p>
<pre class="literal-block">
&lt;?php

namespace App\Http\Controllers;

use Storage;
use Illuminate\Http\Request;
use App\Http\Controllers\Controller;

class UserController extends Controller
{
    /**
     * Update the avatar for the given user.
     *
     * &#64;param  Request  $request
     * &#64;param  int  $id
     * &#64;return Response
     */
    public function updateAvatar(Request $request, $id)
    {
        $user = User::findOrFail($id);

        Storage::put(
            'avatars/'.$user-&gt;id,
            file_get_contents($request-&gt;file('avatar')-&gt;getRealPath())
        );
    }
}
</pre>
<p>When using multiple disks, you may access a particular disk using the <code class="docutils literal"><span class="pre">disk</span></code> method on the <code class="docutils literal"><span class="pre">Storage</span></code> facade. Of course, you may continue to chain methods to execute methods on the disk:</p>
<pre class="literal-block">
$disk = Storage::disk('s3');

$contents = Storage::disk('local')-&gt;get('file.jpg')
</pre>
<p><a name="retrieving-files"></a></p>
</div>
<div class="section" id="retrieving-files">
<span id="retrieving-files"></span><h3>Retrieving Files<a class="headerlink" href="#retrieving-files" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">get</span></code> method may be used to retrieve the contents of a given file. The raw string contents of the file will be returned by the method:</p>
<pre class="literal-block">
$contents = Storage::get('file.jpg');
</pre>
<p>The <code class="docutils literal"><span class="pre">exists</span></code> method may be used to determine if a given file exists on the disk:</p>
<pre class="literal-block">
$exists = Storage::disk('s3')-&gt;exists('file.jpg');
</pre>
<div class="section" id="file-meta-information">
<span id="file-meta-information"></span><h4>File Meta Information<a class="headerlink" href="#file-meta-information" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">size</span></code> method may be used to get the size of the file in bytes:</p>
<pre class="literal-block">
$size = Storage::size('file1.jpg');
</pre>
<p>The <code class="docutils literal"><span class="pre">lastModified</span></code> method returns the UNIX timestamp of the last time the file was modified:</p>
<pre class="literal-block">
$time = Storage::lastModified('file1.jpg');
</pre>
<p><a name="storing-files"></a></p>
</div>
</div>
<div class="section" id="storing-files">
<span id="storing-files"></span><h3>Storing Files<a class="headerlink" href="#storing-files" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">put</span></code> method may be used to store a file on disk. You may also pass a PHP <code class="docutils literal"><span class="pre">resource</span></code> to the <code class="docutils literal"><span class="pre">put</span></code> method, which will use Flysystem&#8217;s underlying stream support. Using streams is greatly recommended when dealing with large files:</p>
<pre class="literal-block">
Storage::put('file.jpg', $contents);

Storage::put('file.jpg', $resource);
</pre>
<p>The <code class="docutils literal"><span class="pre">copy</span></code> method may be used to copy an existing file to a new location on the disk:</p>
<pre class="literal-block">
Storage::copy('old/file1.jpg', 'new/file1.jpg');
</pre>
<p>The <code class="docutils literal"><span class="pre">move</span></code> method may be used to move an existing file to a new location:</p>
<pre class="literal-block">
Storage::move('old/file1.jpg', 'new/file1.jpg');
</pre>
<div class="section" id="prepending-appending-to-files">
<span id="prepending-appending-to-files"></span><h4>Prepending / Appending To Files<a class="headerlink" href="#prepending-appending-to-files" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">prepend</span></code> and <code class="docutils literal"><span class="pre">append</span></code> methods allow you to easily insert content at the beginning or end of a file:</p>
<pre class="literal-block">
Storage::prepend('file.log', 'Prepended Text');

Storage::append('file.log', 'Appended Text');
</pre>
<p><a name="deleting-files"></a></p>
</div>
</div>
<div class="section" id="deleting-files">
<span id="deleting-files"></span><h3>Deleting Files<a class="headerlink" href="#deleting-files" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">delete</span></code> method accepts a single filename or an array of files to remove from the disk:</p>
<pre class="literal-block">
Storage::delete('file.jpg');

Storage::delete(['file1.jpg', 'file2.jpg']);
</pre>
<p><a name="directories"></a></p>
</div>
<div class="section" id="directories">
<span id="directories"></span><h3>Directories<a class="headerlink" href="#directories" title="Permalink to this headline">¶</a></h3>
<div class="section" id="get-all-files-within-a-directory">
<span id="get-all-files-within-a-directory"></span><h4>Get All Files Within A Directory<a class="headerlink" href="#get-all-files-within-a-directory" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">files</span></code> method returns an array of all of the files in a given directory. If you would like to retrieve a list of all files within a given directory including all sub-directories, you may use the <code class="docutils literal"><span class="pre">allFiles</span></code> method:</p>
<pre class="literal-block">
$files = Storage::files($directory);

$files = Storage::allFiles($directory);
</pre>
</div>
<div class="section" id="get-all-directories-within-a-directory">
<span id="get-all-directories-within-a-directory"></span><h4>Get All Directories Within A Directory<a class="headerlink" href="#get-all-directories-within-a-directory" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">directories</span></code> method returns an array of all the directories within a given directory. Additionally, you may use the <code class="docutils literal"><span class="pre">allDirectories</span></code> method to get a list of all directories within a given directory and all of its sub-directories:</p>
<pre class="literal-block">
$directories = Storage::directories($directory);

// Recursive...
$directories = Storage::allDirectories($directory);
</pre>
</div>
<div class="section" id="create-a-directory">
<span id="create-a-directory"></span><h4>Create A Directory<a class="headerlink" href="#create-a-directory" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">makeDirectory</span></code> method will create the given directory, including any needed sub-directories:</p>
<pre class="literal-block">
Storage::makeDirectory($directory);
</pre>
</div>
<div class="section" id="delete-a-directory">
<span id="delete-a-directory"></span><h4>Delete A Directory<a class="headerlink" href="#delete-a-directory" title="Permalink to this headline">¶</a></h4>
<p>Finally, the <code class="docutils literal"><span class="pre">deleteDirectory</span></code> may be used to remove a directory, including all of its files, from the disk:</p>
<pre class="literal-block">
Storage::deleteDirectory($directory);
</pre>
<p><a name="custom-filesystems"></a></p>
</div>
</div>
</div>
<div class="section" id="custom-filesystems">
<span id="custom-filesystems"></span><h2>Custom Filesystems<a class="headerlink" href="#custom-filesystems" title="Permalink to this headline">¶</a></h2>
<p>Laravel&#8217;s Flysystem integration provides drivers for several &#8220;drivers&#8221; out of the box; however, Flysystem is not limited to these and has adapters for many other storage systems. You can create a custom driver if you want to use one of these additional adapters in your Laravel application.</p>
<p>In order to set up the custom filesystem you will need to create a <a class="reference external" href="providers.html">service provider</a> such as <code class="docutils literal"><span class="pre">DropboxServiceProvider</span></code>. In the provider&#8217;s <code class="docutils literal"><span class="pre">boot</span></code> method, you may use the <code class="docutils literal"><span class="pre">Storage</span></code> facade&#8217;s <code class="docutils literal"><span class="pre">extend</span></code> method to define the custom driver:</p>
<pre class="literal-block">
&lt;?php

namespace App\Providers;

use Storage;
use League\Flysystem\Filesystem;
use Dropbox\Client as DropboxClient;
use Illuminate\Support\ServiceProvider;
use League\Flysystem\Dropbox\DropboxAdapter;

class DropboxServiceProvider extends ServiceProvider
{
    /**
     * Perform post-registration booting of services.
     *
     * &#64;return void
     */
    public function boot()
    {
        Storage::extend('dropbox', function($app, $config) {
            $client = new DropboxClient(
                $config['accessToken'], $config['clientIdentifier']
            );

            return new Filesystem(new DropboxAdapter($client));
        });
    }

    /**
     * Register bindings in the container.
     *
     * &#64;return void
     */
    public function register()
    {
        //
    }
}
</pre>
<p>The first argument of the <code class="docutils literal"><span class="pre">extend</span></code> method is the name of the driver and the second is a Closure that receives the <code class="docutils literal"><span class="pre">$app</span></code> and <code class="docutils literal"><span class="pre">$config</span></code> variables. The resolver Closure must return an instance of <code class="docutils literal"><span class="pre">League\Flysystem\Filesystem</span></code>. The <code class="docutils literal"><span class="pre">$config</span></code> variable contains the values defined in <code class="docutils literal"><span class="pre">config/filesystems.php</span></code> for the specified disk.</p>
<p>Once you have created the service provider to register the extension, you may use the <code class="docutils literal"><span class="pre">dropbox</span></code> driver in your <code class="docutils literal"><span class="pre">config/filesystem.php</span></code> configuration file.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, The Weezqyd.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>