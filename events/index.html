<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Events - Laravel 5.4 Official Documentation</title>
      
      
      
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Laravel 5.4 Official Documentation">
    <meta property="og:image" content="None/../">
    <meta name="apple-mobile-web-app-title" content="Laravel 5.4 Official Documentation">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../assets/fonts/icon.eot?52m981');
      	src: url('../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../assets/stylesheets/application-a422ff04cc.css">
    
      <link rel="stylesheet" href="../assets/stylesheets/palettes-05ab2406df.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
    <script src="../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class="palette-primary-teal palette-accent-green">
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
          </span>
        
        Events
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="/" class="project">
    <div class="banner">
      
      <div class="name">
        <strong>
          Laravel 5.4 Official Documentation
          <span class="version">
            
          </span>
        </strong>
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Home" href="..">
      Home
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Apis" href="../apis/">
      Apis
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Application testing" href="../application-testing/">
      Application testing
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Artisan" href="../artisan/">
      Artisan
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Authentication" href="../authentication/">
      Authentication
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Authorization" href="../authorization/">
      Authorization
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Billing" href="../billing/">
      Billing
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Blade" href="../blade/">
      Blade
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Broadcasting" href="../broadcasting/">
      Broadcasting
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Cache" href="../cache/">
      Cache
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Collections" href="../collections/">
      Collections
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Configuration" href="../configuration/">
      Configuration
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Container" href="../container/">
      Container
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Contracts" href="../contracts/">
      Contracts
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Contributing" href="../contributing/">
      Contributing
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Contributions" href="../contributions/">
      Contributions
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Controllers" href="../controllers/">
      Controllers
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Csrf" href="../csrf/">
      Csrf
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Database testing" href="../database-testing/">
      Database testing
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Database" href="../database/">
      Database
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Documentation" href="../documentation/">
      Documentation
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Elixir" href="../elixir/">
      Elixir
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Eloquent collections" href="../eloquent-collections/">
      Eloquent collections
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Eloquent mutators" href="../eloquent-mutators/">
      Eloquent mutators
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Eloquent relationships" href="../eloquent-relationships/">
      Eloquent relationships
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Eloquent serialization" href="../eloquent-serialization/">
      Eloquent serialization
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Eloquent" href="../eloquent/">
      Eloquent
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Encryption" href="../encryption/">
      Encryption
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Envoy" href="../envoy/">
      Envoy
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Errors" href="../errors/">
      Errors
    </a>
    
  </li>

          
            
  <li>
    <a class="current" title="Events" href="./">
      Events
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Introduction" href="#introduction">
                Introduction
              </a>
            </li>
          
            <li class="anchor">
              <a title="Registering Events &amp; Listeners" href="#registering-events-listeners">
                Registering Events &amp; Listeners
              </a>
            </li>
          
            <li class="anchor">
              <a title="Defining Events" href="#defining-events">
                Defining Events
              </a>
            </li>
          
            <li class="anchor">
              <a title="Defining Listeners" href="#defining-listeners">
                Defining Listeners
              </a>
            </li>
          
            <li class="anchor">
              <a title="Queued Event Listeners" href="#queued-event-listeners">
                Queued Event Listeners
              </a>
            </li>
          
            <li class="anchor">
              <a title="Firing Events" href="#firing-events">
                Firing Events
              </a>
            </li>
          
            <li class="anchor">
              <a title="Event Subscribers" href="#event-subscribers">
                Event Subscribers
              </a>
            </li>
          
        </ul>
      
    
  </li>

          
            
  <li>
    <a class="" title="Facades" href="../facades/">
      Facades
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Filesystem" href="../filesystem/">
      Filesystem
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Frontend" href="../frontend/">
      Frontend
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Hashing" href="../hashing/">
      Hashing
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Helpers" href="../helpers/">
      Helpers
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Homestead" href="../homestead/">
      Homestead
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Installation" href="../installation/">
      Installation
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="License" href="../license/">
      License
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Lifecycle" href="../lifecycle/">
      Lifecycle
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Localization" href="../localization/">
      Localization
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Mail" href="../mail/">
      Mail
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Middleware" href="../middleware/">
      Middleware
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Migrations" href="../migrations/">
      Migrations
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Mocking" href="../mocking/">
      Mocking
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Notifications" href="../notifications/">
      Notifications
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Packages" href="../packages/">
      Packages
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Pagination" href="../pagination/">
      Pagination
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Passport" href="../passport/">
      Passport
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Passwords" href="../passwords/">
      Passwords
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Providers" href="../providers/">
      Providers
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Queries" href="../queries/">
      Queries
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Queues" href="../queues/">
      Queues
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Redirects" href="../redirects/">
      Redirects
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Redis" href="../redis/">
      Redis
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Releases" href="../releases/">
      Releases
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Requests" href="../requests/">
      Requests
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Responses" href="../responses/">
      Responses
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Routing" href="../routing/">
      Routing
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Scheduling" href="../scheduling/">
      Scheduling
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Scout" href="../scout/">
      Scout
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Seeding" href="../seeding/">
      Seeding
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Session" href="../session/">
      Session
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Structure" href="../structure/">
      Structure
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Testing" href="../testing/">
      Testing
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Upgrade" href="../upgrade/">
      Upgrade
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Valet" href="../valet/">
      Valet
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Validation" href="../validation/">
      Validation
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Views" href="../views/">
      Views
    </a>
    
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="events">Events</h1>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#registering-events-and-listeners">Registering Events &amp; Listeners</a><ul>
<li><a href="#generating-events-and-listeners">Generating Events &amp; Listeners</a></li>
<li><a href="#manually-registering-events">Manually Registering Events</a></li>
</ul>
</li>
<li><a href="#defining-events">Defining Events</a></li>
<li><a href="#defining-listeners">Defining Listeners</a></li>
<li><a href="#queued-event-listeners">Queued Event Listeners</a><ul>
<li><a href="#manually-accessing-the-queue">Manually Accessing The Queue</a></li>
</ul>
</li>
<li><a href="#firing-events">Firing Events</a></li>
<li><a href="#event-subscribers">Event Subscribers</a><ul>
<li><a href="#writing-event-subscribers">Writing Event Subscribers</a></li>
<li><a href="#registering-event-subscribers">Registering Event Subscribers</a></li>
</ul>
</li>
</ul>
<p><a name="introduction"></a></p>
<h2 id="introduction">Introduction</h2>
<p>Laravel's events provides a simple observer implementation, allowing you to subscribe and listen for various events that occur in your application. Event classes are typically stored in the <code>app/Events</code> directory, while their listeners are stored in <code>app/Listeners</code>. Don't worry if you don't see these directories in your application, since they will be created for you as you generate events and listeners using Artisan console commands.</p>
<p>Events serve as a great way to decouple various aspects of your application, since a single event can have multiple listeners that do not depend on each other. For example, you may wish to send a Slack notification to your user each time an order has shipped. Instead of coupling your order processing code to your Slack notification code, you can simply raise an <code>OrderShipped</code> event, which a listener can receive and transform into a Slack notification.</p>
<p><a name="registering-events-and-listeners"></a></p>
<h2 id="registering-events-listeners">Registering Events &amp; Listeners</h2>
<p>The <code>EventServiceProvider</code> included with your Laravel application provides a convenient place to register all of your application's event listeners. The <code>listen</code> property contains an array of all events (keys) and their listeners (values). Of course, you may add as many events to this array as your application requires. For example, let's add a <code>OrderShipped</code> event:</p>
<div class="codehilite"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * The event listener mappings for the application.</span>
<span class="cm"> *</span>
<span class="cm"> * @var array</span>
<span class="cm"> */</span><span class="w"></span>
protected<span class="w"> </span><span class="err">$</span>listen<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[</span><span class="w"></span>
<span class="w">    </span><span class="s">&#39;App\Events\OrderShipped&#39;</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="err">[</span><span class="w"></span>
<span class="w">        </span><span class="s">&#39;App\Listeners\SendShipmentNotification&#39;</span><span class="o">,</span><span class="w"></span>
<span class="w">    </span><span class="err">]</span><span class="o">,</span><span class="w"></span>
<span class="err">];</span><span class="w"></span>
</pre></div>


<p><a name="generating-events-and-listeners"></a></p>
<h3 id="generating-events-listeners">Generating Events &amp; Listeners</h3>
<p>Of course, manually creating the files for each event and listener is cumbersome. Instead, simply add listeners and events to your <code>EventServiceProvider</code> and use the <code>event:generate</code> command. This command will generate any events or listeners that are listed in your <code>EventServiceProvider</code>. Of course, events and listeners that already exist will be left untouched:</p>
<div class="codehilite"><pre><span></span>php artisan event:generate
</pre></div>


<p><a name="manually-registering-events"></a></p>
<h3 id="manually-registering-events">Manually Registering Events</h3>
<p>Typically, events should be registered via the <code>EventServiceProvider</code> <code>$listen</code> array; however, you may also register Closure based events manually in the <code>boot</code> method of your <code>EventServiceProvider</code>:</p>
<div class="codehilite"><pre><span></span><span class="c">/**</span>
<span class="c"> * Register any other events for your application.</span>
<span class="c"> *</span>
<span class="c"> * @return void</span>
<span class="c"> */</span>
<span class="nt">public</span> <span class="nt">function</span> <span class="nt">boot</span><span class="o">()</span>
<span class="p">{</span>
    <span class="n">parent</span><span class="p">:</span><span class="o">:</span><span class="nf">boot</span><span class="p">();</span>

    <span class="n">Event</span><span class="p">:</span><span class="o">:</span><span class="nf">listen</span><span class="p">(</span><span class="s1">&#39;event.name&#39;</span><span class="p">,</span> <span class="n">function</span> <span class="err">($</span><span class="n">foo</span><span class="p">,</span> <span class="err">$</span><span class="n">bar</span><span class="p">)</span> <span class="err">{</span>
        <span class="o">//</span>
    <span class="p">}</span><span class="o">);</span>
<span class="err">}</span>
</pre></div>


<h4 id="wildcard-event-listeners">Wildcard Event Listeners</h4>
<p>You may even register listeners using the <code>*</code> as a wildcard parameter, allowing you to catch multiple events on the same listener. Wildcard listeners receive the entire event data array as a single argument:</p>
<div class="codehilite"><pre><span></span>Event::listen(&#39;event.*&#39;, function (array $data) {
    //
});
</pre></div>


<p><a name="defining-events"></a></p>
<h2 id="defining-events">Defining Events</h2>
<p>An event class is simply a data container which holds the information related to the event. For example, let's assume our generated <code>OrderShipped</code> event receives an <a href="../docs/{{version}}/eloquent">Eloquent ORM</a> object:</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Events</span><span class="p">;</span>

<span class="nx">use</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Order</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Queue</span><span class="err">\</span><span class="nx">SerializesModels</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">OrderShipped</span>
<span class="p">{</span>
    <span class="nx">use</span> <span class="nx">SerializesModels</span><span class="p">;</span>

    <span class="kr">public</span> <span class="nx">$order</span><span class="p">;</span>

    <span class="cm">/**</span>
<span class="cm">     * Create a new event instance.</span>
<span class="cm">     *</span>
<span class="cm">     * @param  Order  $order</span>
<span class="cm">     * @return void</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">__construct</span><span class="p">(</span><span class="nx">Order</span> <span class="nx">$order</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">order</span> <span class="o">=</span> <span class="nx">$order</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>As you can see, this event class contains no logic. It is simply a container for the <code>Order</code> instance that was purchased. The <code>SerializesModels</code> trait used by the event will gracefully serialize any Eloquent models if the event object is serialized using PHP's <code>serialize</code> function.</p>
<p><a name="defining-listeners"></a></p>
<h2 id="defining-listeners">Defining Listeners</h2>
<p>Next, let's take a look at the listener for our example event. Event listeners receive the event instance in their <code>handle</code> method. The <code>event:generate</code> command will automatically import the proper event class and type-hint the event on the <code>handle</code> method. Within the <code>handle</code> method, you may perform any actions necessary to respond to the event:</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Listeners</span><span class="p">;</span>

<span class="nx">use</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Events</span><span class="err">\</span><span class="nx">OrderShipped</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">SendShipmentNotification</span>
<span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * Create the event listener.</span>
<span class="cm">     *</span>
<span class="cm">     * @return void</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">__construct</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//</span>
    <span class="p">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Handle the event.</span>
<span class="cm">     *</span>
<span class="cm">     * @param  OrderShipped  $event</span>
<span class="cm">     * @return void</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">handle</span><span class="p">(</span><span class="nx">OrderShipped</span> <span class="nx">$event</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Access the order using $event-&gt;order...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<blockquote>
<p>{tip} Your event listeners may also type-hint any dependencies they need on their constructors. All event listeners are resolved via the Laravel <a href="../docs/{{version}}/container">service container</a>, so dependencies will be injected automatically.</p>
</blockquote>
<h4 id="stopping-the-propagation-of-an-event">Stopping The Propagation Of An Event</h4>
<p>Sometimes, you may wish to stop the propagation of an event to other listeners. You may do so by returning <code>false</code> from your listener's <code>handle</code> method.</p>
<p><a name="queued-event-listeners"></a></p>
<h2 id="queued-event-listeners">Queued Event Listeners</h2>
<p>Queueing listeners can be beneficial if your listener is going to perform a slow task such as sending an e-mail or making an HTTP request. Before getting started with queued listeners, make sure to <a href="../docs/{{version}}/queues">configure your queue</a> and start a queue listener on your server or local development environment.</p>
<p>To specify that a listener should be queued, add the <code>ShouldQueue</code> interface to the listener class. Listeners generated by the <code>event:generate</code> Artisan command already have this interface imported into the current namespace, so you can use it immediately:</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Listeners</span><span class="p">;</span>

<span class="nx">use</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Events</span><span class="err">\</span><span class="nx">OrderShipped</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Contracts</span><span class="err">\</span><span class="nx">Queue</span><span class="err">\</span><span class="nx">ShouldQueue</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">SendShipmentNotification</span> <span class="kr">implements</span> <span class="nx">ShouldQueue</span>
<span class="p">{</span>
    <span class="c1">//</span>
<span class="p">}</span>
</pre></div>


<p>That's it! Now, when this listener is called for an event, it will be automatically queued by the event dispatcher using Laravel's <a href="../docs/{{version}}/queues">queue system</a>. If no exceptions are thrown when the listener is executed by the queue, the queued job will automatically be deleted after it has finished processing.</p>
<p><a name="manually-accessing-the-queue"></a></p>
<h3 id="manually-accessing-the-queue">Manually Accessing The Queue</h3>
<p>If you need to manually access the listener's underlying queue job's <code>delete</code> and <code>release</code> methods, you may do so using the <code>Illuminate\Queue\InteractsWithQueue</code> trait. This trait is imported by default on generated listeners and provides access to these methods:</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Listeners</span><span class="p">;</span>

<span class="nx">use</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Events</span><span class="err">\</span><span class="nx">OrderShipped</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Queue</span><span class="err">\</span><span class="nx">InteractsWithQueue</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Contracts</span><span class="err">\</span><span class="nx">Queue</span><span class="err">\</span><span class="nx">ShouldQueue</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">SendShipmentNotification</span> <span class="kr">implements</span> <span class="nx">ShouldQueue</span>
<span class="p">{</span>
    <span class="nx">use</span> <span class="nx">InteractsWithQueue</span><span class="p">;</span>

    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">handle</span><span class="p">(</span><span class="nx">OrderShipped</span> <span class="nx">$event</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">release</span><span class="p">(</span><span class="mi">30</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p><a name="firing-events"></a></p>
<h2 id="firing-events">Firing Events</h2>
<p>To fire an event, you may pass an instance of the event to the <code>event</code> helper. The helper will dispatch the event to all of its registered listeners. Since the <code>event</code> helper is globally available, you may call it from anywhere in your application:</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">Controllers</span><span class="p">;</span>

<span class="nx">use</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Order</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Events</span><span class="err">\</span><span class="nx">OrderShipped</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">Controllers</span><span class="err">\</span><span class="nx">Controller</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">OrderController</span> <span class="kr">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * Ship the given order.</span>
<span class="cm">     *</span>
<span class="cm">     * @param  int  $orderId</span>
<span class="cm">     * @return Response</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">ship</span><span class="p">(</span><span class="nx">$orderId</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">$order</span> <span class="o">=</span> <span class="nx">Order</span><span class="o">::</span><span class="nx">findOrFail</span><span class="p">(</span><span class="nx">$orderId</span><span class="p">);</span>

        <span class="c1">// Order shipment logic...</span>

        <span class="nx">event</span><span class="p">(</span><span class="k">new</span> <span class="nx">OrderShipped</span><span class="p">(</span><span class="nx">$order</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<blockquote>
<p>{tip} When testing, it can be helpful to assert that certain events were fired without actually triggering their listeners. Laravel's <a href="../docs/{{version}}/mocking#mocking-events">built-in testing helpers</a> makes it a cinch.</p>
</blockquote>
<p><a name="event-subscribers"></a></p>
<h2 id="event-subscribers">Event Subscribers</h2>
<p><a name="writing-event-subscribers"></a></p>
<h3 id="writing-event-subscribers">Writing Event Subscribers</h3>
<p>Event subscribers are classes that may subscribe to multiple events from within the class itself, allowing you to define several event handlers within a single class. Subscribers should define a <code>subscribe</code> method, which will be passed an event dispatcher instance. You may call the <code>listen</code> method on the given dispatcher to register event listeners:</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Listeners</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">UserEventSubscriber</span>
<span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * Handle user login events.</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">onUserLogin</span><span class="p">(</span><span class="nx">$event</span><span class="p">)</span> <span class="p">{}</span>

    <span class="cm">/**</span>
<span class="cm">     * Handle user logout events.</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">onUserLogout</span><span class="p">(</span><span class="nx">$event</span><span class="p">)</span> <span class="p">{}</span>

    <span class="cm">/**</span>
<span class="cm">     * Register the listeners for the subscriber.</span>
<span class="cm">     *</span>
<span class="cm">     * @param  Illuminate\Events\Dispatcher  $events</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">subscribe</span><span class="p">(</span><span class="nx">$events</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nx">$events</span><span class="o">-&gt;</span><span class="nx">listen</span><span class="p">(</span>
            <span class="s1">&#39;Illuminate\Auth\Events\Login&#39;</span><span class="p">,</span>
            <span class="s1">&#39;App\Listeners\UserEventSubscriber@onUserLogin&#39;</span>
        <span class="p">);</span>

        <span class="nx">$events</span><span class="o">-&gt;</span><span class="nx">listen</span><span class="p">(</span>
            <span class="s1">&#39;Illuminate\Auth\Events\Logout&#39;</span><span class="p">,</span>
            <span class="s1">&#39;App\Listeners\UserEventSubscriber@onUserLogout&#39;</span>
        <span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>


<p><a name="registering-event-subscribers"></a></p>
<h3 id="registering-event-subscribers">Registering Event Subscribers</h3>
<p>After writing the subscriber, you are ready to register it with the event dispatcher. You may register subscribers using the <code>$subscribe</code> property on the <code>EventServiceProvider</code>. For example, let's add the <code>UserEventSubscriber</code> to the list:</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span> <span class="nx">App</span><span class="err">\</span><span class="nx">Providers</span><span class="p">;</span>

<span class="nx">use</span> <span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Foundation</span><span class="err">\</span><span class="nx">Support</span><span class="err">\</span><span class="nx">Providers</span><span class="err">\</span><span class="nx">EventServiceProvider</span> <span class="kr">as</span> <span class="nx">ServiceProvider</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">EventServiceProvider</span> <span class="kr">extends</span> <span class="nx">ServiceProvider</span>
<span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * The event listener mappings for the application.</span>
<span class="cm">     *</span>
<span class="cm">     * @var array</span>
<span class="cm">     */</span>
    <span class="kr">protected</span> <span class="nx">$listen</span> <span class="o">=</span> <span class="p">[</span>
        <span class="c1">//</span>
    <span class="p">];</span>

    <span class="cm">/**</span>
<span class="cm">     * The subscriber classes to register.</span>
<span class="cm">     *</span>
<span class="cm">     * @var array</span>
<span class="cm">     */</span>
    <span class="kr">protected</span> <span class="nx">$subscribe</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">&#39;App\Listeners\UserEventSubscriber&#39;</span><span class="p">,</span>
    <span class="p">];</span>
<span class="p">}</span>
</pre></div>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../errors/" title="Errors">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Errors
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../facades/" title="Facades">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Facades
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '..';
      var repo_id  = '';
    </script>
    <script src="../assets/javascripts/application-997097ee0c.js"></script>
    
    
  </body>
</html>