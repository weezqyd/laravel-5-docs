

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Session &mdash; Laravel 5 Documentation 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Laravel 5 Documentation 1.0 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Laravel 5 Documentation
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <!-- Local TOC -->
                <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Session</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#configuration">Configuration</a></li>
<li><a class="reference internal" href="#driver-prerequisites">Driver Prerequisites</a><ul>
<li><a class="reference internal" href="#database">Database</a></li>
<li><a class="reference internal" href="#redis">Redis</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-session-considerations">Other Session Considerations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-usage">Basic Usage</a><ul>
<li><a class="reference internal" href="#accessing-the-session">Accessing The Session</a></li>
<li><a class="reference internal" href="#determining-if-an-item-exists-in-the-session">Determining If An Item Exists In The Session</a></li>
<li><a class="reference internal" href="#storing-data-in-the-session">Storing Data In The Session</a></li>
<li><a class="reference internal" href="#pushing-to-array-session-values">Pushing To Array Session Values</a></li>
<li><a class="reference internal" href="#retrieving-and-deleting-an-item">Retrieving And Deleting An Item</a></li>
<li><a class="reference internal" href="#deleting-items-from-the-session">Deleting Items From The Session</a></li>
<li><a class="reference internal" href="#regenerating-the-session-id">Regenerating The Session ID</a></li>
<li><a class="reference internal" href="#flash-data">Flash Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#adding-custom-session-drivers">Adding Custom Session Drivers</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Laravel 5 Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Session</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/session.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="session">
<span id="session"></span><h1>Session<a class="headerlink" href="#session" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="#introduction">Introduction</a></li>
<li><a class="reference external" href="#basic-usage">Basic Usage</a><ul>
<li><a class="reference external" href="#flash-data">Flash Data</a></li>
</ul>
</li>
<li><a class="reference external" href="#adding-custom-session-drivers">Adding Custom Session Drivers</a></li>
</ul>
<p><a name="introduction"></a></p>
<div class="section" id="introduction">
<span id="introduction"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Since HTTP driven applications are stateless, sessions provide a way to store information about the user across requests. Laravel ships with a variety of session back-ends available for use through a clean, unified API. Support for popular back-ends such as <a class="reference external" href="http://memcached.org">Memcached</a>, <a class="reference external" href="http://redis.io">Redis</a>, and databases is included out of the box.</p>
<div class="section" id="configuration">
<span id="configuration"></span><h3>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h3>
<p>The session configuration file is stored at <code class="docutils literal"><span class="pre">config/session.php</span></code>. Be sure to review the well documented options available to you in this file. By default, Laravel is configured to use the <code class="docutils literal"><span class="pre">file</span></code> session driver, which will work well for many applications. In production applications, you may consider using the <code class="docutils literal"><span class="pre">memcached</span></code> or <code class="docutils literal"><span class="pre">redis</span></code> drivers for even faster session performance.</p>
<p>The session <code class="docutils literal"><span class="pre">driver</span></code> defines where session data will be stored for each request. Laravel ships with several great drivers out of the box:</p>
<div class="content-list" markdown="1">
- `file` - sessions are stored in `storage/framework/sessions`.
- `cookie` - sessions are stored in secure, encrypted cookies.
- `database` - sessions are stored in a database used by your application.
- `memcached` / `redis` - sessions are stored in one of these fast, cache based stores.
- `array` - sessions are stored in a simple PHP array and will not be persisted across requests.
</div><blockquote>
<div><strong>Note:</strong> The array driver is typically used for running <a class="reference external" href="/docs/{{version}}/testing">tests</a> to prevent session data from persisting.</div></blockquote>
</div>
<div class="section" id="driver-prerequisites">
<span id="driver-prerequisites"></span><h3>Driver Prerequisites<a class="headerlink" href="#driver-prerequisites" title="Permalink to this headline">¶</a></h3>
<div class="section" id="database">
<span id="database"></span><h4>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h4>
<p>When using the <code class="docutils literal"><span class="pre">database</span></code> session driver, you will need to setup a table to contain the session items. Below is an example <code class="docutils literal"><span class="pre">Schema</span></code> declaration for the table:</p>
<pre class="literal-block">
Schema::create('sessions', function ($table) {
    $table-&gt;string('id')-&gt;unique();
    $table-&gt;text('payload');
    $table-&gt;integer('last_activity');
});
</pre>
<p>You may use the <code class="docutils literal"><span class="pre">session:table</span></code> Artisan command to generate this migration for you!</p>
<pre class="literal-block">
php artisan session:table

composer dump-autoload

php artisan migrate
</pre>
</div>
<div class="section" id="redis">
<span id="redis"></span><h4>Redis<a class="headerlink" href="#redis" title="Permalink to this headline">¶</a></h4>
<p>Before using Redis sessions with Laravel, you will need to install the <code class="docutils literal"><span class="pre">predis/predis</span></code> package (~1.0) via Composer.</p>
</div>
</div>
<div class="section" id="other-session-considerations">
<span id="other-session-considerations"></span><h3>Other Session Considerations<a class="headerlink" href="#other-session-considerations" title="Permalink to this headline">¶</a></h3>
<p>The Laravel framework uses the <code class="docutils literal"><span class="pre">flash</span></code> session key internally, so you should not add an item to the session by that name.</p>
<p>If you need all stored session data to be encrypted, set the <code class="docutils literal"><span class="pre">encrypt</span></code> configuration option to <code class="docutils literal"><span class="pre">true</span></code>.</p>
<p><a name="basic-usage"></a></p>
</div>
</div>
<div class="section" id="basic-usage">
<span id="basic-usage"></span><h2>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<div class="section" id="accessing-the-session">
<span id="accessing-the-session"></span><h3>Accessing The Session<a class="headerlink" href="#accessing-the-session" title="Permalink to this headline">¶</a></h3>
<p>First, let&#8217;s access the session. We can access the session instance via the HTTP request, which can be type-hinted on a controller method. Remember, controller method dependencies are injected via the Laravel <a class="reference external" href="/docs/{{version}}/container">service container</a>:</p>
<pre class="literal-block">
&lt;?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use App\Http\Controllers\Controller;

class UserController extends Controller
{
    /**
     * Show the profile for the given user.
     *
     * &#64;param  Request  $request
     * &#64;param  int  $id
     * &#64;return Response
     */
    public function showProfile(Request $request, $id)
    {
        $value = $request-&gt;session()-&gt;get('key');

        //
    }
}
</pre>
<p>When you retrieve a value from the session, you may also pass a default value as the second argument to the <code class="docutils literal"><span class="pre">get</span></code> method. This default value will be returned if the specified key does not exist in the session. If you pass a <code class="docutils literal"><span class="pre">Closure</span></code> as the default value to the <code class="docutils literal"><span class="pre">get</span></code> method, the <code class="docutils literal"><span class="pre">Closure</span></code> will be executed and its result returned:</p>
<pre class="literal-block">
$value = $request-&gt;session()-&gt;get('key', 'default');

$value = $request-&gt;session()-&gt;get('key', function() {
    return 'default';
});
</pre>
<p>If you would like to retrieve all data from the session, you may use the <code class="docutils literal"><span class="pre">all</span></code> method:</p>
<pre class="literal-block">
$data = $request-&gt;session()-&gt;all();
</pre>
<p>You may also use the global <code class="docutils literal"><span class="pre">session</span></code> PHP function to retrieve and store data in the session:</p>
<pre class="literal-block">
Route::get('home', function () {
    // Retrieve a piece of data from the session...
    $value = session('key');

    // Store a piece of data in the session...
    session(['key' =&gt; 'value']);
});
</pre>
</div>
<div class="section" id="determining-if-an-item-exists-in-the-session">
<span id="determining-if-an-item-exists-in-the-session"></span><h3>Determining If An Item Exists In The Session<a class="headerlink" href="#determining-if-an-item-exists-in-the-session" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">has</span></code> method may be used to check if an item exists in the session. This method will return <code class="docutils literal"><span class="pre">true</span></code> if the item exists:</p>
<pre class="literal-block">
if ($request-&gt;session()-&gt;has('users')) {
    //
}
</pre>
</div>
<div class="section" id="storing-data-in-the-session">
<span id="storing-data-in-the-session"></span><h3>Storing Data In The Session<a class="headerlink" href="#storing-data-in-the-session" title="Permalink to this headline">¶</a></h3>
<p>Once you have access to the session instance, you may call a variety of functions to interact with the underlying data. For example, the <code class="docutils literal"><span class="pre">put</span></code> method stores a new piece of data in the session:</p>
<pre class="literal-block">
$request-&gt;session()-&gt;put('key', 'value');
</pre>
</div>
<div class="section" id="pushing-to-array-session-values">
<span id="pushing-to-array-session-values"></span><h3>Pushing To Array Session Values<a class="headerlink" href="#pushing-to-array-session-values" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">push</span></code> method may be used to push a new value onto a session value that is an array. For example, if the <code class="docutils literal"><span class="pre">user.teams</span></code> key contains an array of team names, you may push a new value onto the array like so:</p>
<pre class="literal-block">
$request-&gt;session()-&gt;push('user.teams', 'developers');
</pre>
</div>
<div class="section" id="retrieving-and-deleting-an-item">
<span id="retrieving-and-deleting-an-item"></span><h3>Retrieving And Deleting An Item<a class="headerlink" href="#retrieving-and-deleting-an-item" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">pull</span></code> method will retrieve and delete an item from the session:</p>
<pre class="literal-block">
$value = $request-&gt;session()-&gt;pull('key', 'default');
</pre>
</div>
<div class="section" id="deleting-items-from-the-session">
<span id="deleting-items-from-the-session"></span><h3>Deleting Items From The Session<a class="headerlink" href="#deleting-items-from-the-session" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">forget</span></code> method will remove a piece of data from the session. If you would like to remove all data from the session, you may use the <code class="docutils literal"><span class="pre">flush</span></code> method:</p>
<pre class="literal-block">
$request-&gt;session()-&gt;forget('key');

$request-&gt;session()-&gt;flush();
</pre>
</div>
<div class="section" id="regenerating-the-session-id">
<span id="regenerating-the-session-id"></span><h3>Regenerating The Session ID<a class="headerlink" href="#regenerating-the-session-id" title="Permalink to this headline">¶</a></h3>
<p>If you need to regenerate the session ID, you may use the <code class="docutils literal"><span class="pre">regenerate</span></code> method:</p>
<pre class="literal-block">
$request-&gt;session()-&gt;regenerate();
</pre>
<p><a name="flash-data"></a></p>
</div>
<div class="section" id="flash-data">
<span id="flash-data"></span><h3>Flash Data<a class="headerlink" href="#flash-data" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you may wish to store items in the session only for the next request. You may do so using the <code class="docutils literal"><span class="pre">flash</span></code> method. Method stored in the session using this method will only be available during the subsequent HTTP request, and then will be deleted. Flash data is primarily useful for short-lived status messages:</p>
<pre class="literal-block">
$request-&gt;session()-&gt;flash('status', 'Task was successful!');
</pre>
<p>If you need to keep your flash data around for even more requests, you may use the <code class="docutils literal"><span class="pre">reflash</span></code> method, which will keep all of the flash data around for an additional request. If you only need to keep specific flash data around, you may use the <code class="docutils literal"><span class="pre">keep</span></code> method:</p>
<pre class="literal-block">
$request-&gt;session()-&gt;reflash();

$request-&gt;session()-&gt;keep(['username', 'email']);
</pre>
<p><a name="adding-custom-session-drivers"></a></p>
</div>
</div>
<div class="section" id="adding-custom-session-drivers">
<span id="adding-custom-session-drivers"></span><h2>Adding Custom Session Drivers<a class="headerlink" href="#adding-custom-session-drivers" title="Permalink to this headline">¶</a></h2>
<p>To add additional drivers to Laravel&#8217;s session back-end, you may use the <code class="docutils literal"><span class="pre">extend</span></code> method on the <code class="docutils literal"><span class="pre">Session</span></code> <a class="reference external" href="/docs/{{version}}/facades">facade</a>. You can call the <code class="docutils literal"><span class="pre">extend</span></code> method from the <code class="docutils literal"><span class="pre">boot</span></code> method of a <a class="reference external" href="/docs/{{version}}/providers">service provider</a>:</p>
<pre class="literal-block">
&lt;?php

namespace App\Providers;

use Session;
use App\Extensions\MongoSessionStore;
use Illuminate\Support\ServiceProvider;

class SessionServiceProvider extends ServiceProvider
{
    /**
     * Perform post-registration booting of services.
     *
     * &#64;return void
     */
    public function boot()
    {
        Session::extend('mongo', function($app) {
            // Return implementation of SessionHandlerInterface...
            return new MongoSessionStore;
        });
    }

    /**
     * Register bindings in the container.
     *
     * &#64;return void
     */
    public function register()
    {
        //
    }
}
</pre>
<p>Note that your custom session driver should implement the <code class="docutils literal"><span class="pre">SessionHandlerInterface</span></code>. This interface contains just a few simple methods we need to implement. A stubbed MongoDB implementation looks something like this:</p>
<pre class="literal-block">
&lt;?php

namespace App\Extensions;

class MongoHandler implements SessionHandlerInterface
{
    public function open($savePath, $sessionName) {}
    public function close() {}
    public function read($sessionId) {}
    public function write($sessionId, $data) {}
    public function destroy($sessionId) {}
    public function gc($lifetime) {}
}
</pre>
<p>Since these methods are not as readily understandable as the cache <code class="docutils literal"><span class="pre">StoreInterface</span></code>, let&#8217;s quickly cover what each of the methods do:</p>
<div class="content-list" markdown="1">
- The `open` method would typically be used in file based session store systems. Since Laravel ships with a `file` session driver, you will almost never need to put anything in this method. You can leave it as an empty stub. It is simply a fact of poor interface design (which we'll discuss later) that PHP requires us to implement this method.
- The `close` method, like the `open` method, can also usually be disregarded. For most drivers, it is not needed.
- The `read` method should return the string version of the session data associated with the given `$sessionId`. There is no need to do any serialization or other encoding when retrieving or storing session data in your driver, as Laravel will perform the serialization for you.
- The `write` method should write the given `$data` string associated with the `$sessionId` to some persistent storage system, such as MongoDB, Dynamo, etc.
- The `destroy` method should remove the data associated with the `$sessionId` from persistent storage.
- The `gc` method should destroy all session data that is older than the given `$lifetime`, which is a UNIX timestamp. For self-expiring systems like Memcached and Redis, this method may be left empty.
</div><p>Once the session driver has been registered, you may use the <code class="docutils literal"><span class="pre">mongo</span></code> driver in your <code class="docutils literal"><span class="pre">config/session.php</span></code> configuration file.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, The Weezqyd.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>