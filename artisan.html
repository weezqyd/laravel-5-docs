

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Artisan Console &mdash; Laravel 5 Documentation 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Laravel 5 Documentation 1.0 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Laravel 5 Documentation
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <!-- Local TOC -->
                <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Artisan Console</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#writing-commands">Writing Commands</a><ul>
<li><a class="reference internal" href="#command-structure">Command Structure</a></li>
</ul>
</li>
<li><a class="reference internal" href="#command-i-o">Command I/O</a><ul>
<li><a class="reference internal" href="#defining-input-expectations">Defining Input Expectations</a><ul>
<li><a class="reference internal" href="#input-descriptions">Input Descriptions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#retrieving-input">Retrieving Input</a></li>
<li><a class="reference internal" href="#prompting-for-input">Prompting For Input</a><ul>
<li><a class="reference internal" href="#asking-for-confirmation">Asking For Confirmation</a></li>
<li><a class="reference internal" href="#giving-the-user-a-choice">Giving The User A Choice</a></li>
</ul>
</li>
<li><a class="reference internal" href="#writing-output">Writing Output</a><ul>
<li><a class="reference internal" href="#table-layouts">Table Layouts</a></li>
<li><a class="reference internal" href="#progress-bars">Progress Bars</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#registering-commands">Registering Commands</a></li>
<li><a class="reference internal" href="#calling-commands-via-code">Calling Commands Via Code</a><ul>
<li><a class="reference internal" href="#calling-commands-from-other-commands">Calling Commands From Other Commands</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Laravel 5 Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Artisan Console</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/artisan.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="artisan-console">
<span id="artisan-console"></span><h1>Artisan Console<a class="headerlink" href="#artisan-console" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="#introduction">Introduction</a></li>
<li><a class="reference external" href="#writing-commands">Writing Commands</a><ul>
<li><a class="reference external" href="#command-structure">Command Structure</a></li>
</ul>
</li>
<li><a class="reference external" href="#command-io">Command I/O</a><ul>
<li><a class="reference external" href="#defining-input-expectations">Defining Input Expectations</a></li>
<li><a class="reference external" href="#retrieving-input">Retrieving Input</a></li>
<li><a class="reference external" href="#prompting-for-input">Prompting For Input</a></li>
<li><a class="reference external" href="#writing-output">Writing Output</a></li>
</ul>
</li>
<li><a class="reference external" href="#registering-commands">Registering Commands</a></li>
<li><a class="reference external" href="#calling-commands-via-code">Calling Commands Via Code</a></li>
</ul>
<p><a name="introduction"></a></p>
<div class="section" id="introduction">
<span id="introduction"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Artisan is the name of the command-line interface included with Laravel. It provides a number of helpful commands for your use while developing your application. It is driven by the powerful Symfony Console component. To view a list of all available Artisan commands, you may use the <code class="docutils literal"><span class="pre">list</span></code> command:</p>
<pre class="literal-block">
php artisan list
</pre>
<p>Every command also includes a &#8220;help&#8221; screen which displays and describes the command&#8217;s available arguments and options. To view a help screen, simply precede the name of the command with <code class="docutils literal"><span class="pre">help</span></code>:</p>
<pre class="literal-block">
php artisan help migrate
</pre>
<p><a name="writing-commands"></a></p>
</div>
<div class="section" id="writing-commands">
<span id="writing-commands"></span><h2>Writing Commands<a class="headerlink" href="#writing-commands" title="Permalink to this headline">¶</a></h2>
<p>In addition to the commands provided with Artisan, you may also build your own custom commands for working with your application. You may store your custom commands in the <code class="docutils literal"><span class="pre">app/Console/Commands</span></code> directory; however, you are free to choose your own storage location as long as your commands can be autoloaded based on your <code class="docutils literal"><span class="pre">composer.json</span></code> settings.</p>
<p>To create a new command, you may use the <code class="docutils literal"><span class="pre">make:console</span></code> Artisan command, which will generate a command stub to help you get started:</p>
<pre class="literal-block">
php artisan make:console SendEmails
</pre>
<p>The command above would generate a class at <code class="docutils literal"><span class="pre">app/Console/Commands/SendEmails.php</span></code>. When creating the command, the <code class="docutils literal"><span class="pre">--command</span></code> option may be used to assign the terminal command name:</p>
<pre class="literal-block">
php artisan make:console SendEmails --command=emails:send
</pre>
<p><a name="command-structure"></a></p>
<div class="section" id="command-structure">
<span id="command-structure"></span><h3>Command Structure<a class="headerlink" href="#command-structure" title="Permalink to this headline">¶</a></h3>
<p>Once your command is generated, you should fill out the <code class="docutils literal"><span class="pre">signature</span></code> and <code class="docutils literal"><span class="pre">description</span></code> properties of the class, which will be used when displaying your command on the <code class="docutils literal"><span class="pre">list</span></code> screen.</p>
<p>The <code class="docutils literal"><span class="pre">handle</span></code> method will be called when your command is executed. You may place any command logic in this method. Let&#8217;s take a look at an example command.</p>
<p>Note that we are able to inject any dependencies we need into the command&#8217;s constructor. The Laravel <a class="reference external" href="container.html">service container</a> will automatically inject all dependencies type-hinted in the constructor. For greater code reusability, it is good practice to keep your console commands light and let them defer to application services to accomplish their tasks.</p>
<pre class="literal-block">
&lt;?php

namespace App\Console\Commands;

use App\User;
use App\DripEmailer;
use Illuminate\Console\Command;
use Illuminate\Foundation\Inspiring;

class Inspire extends Command
{
    /**
     * The name and signature of the console command.
     *
     * &#64;var string
     */
    protected $signature = 'email:send {user}';

    /**
     * The console command description.
     *
     * &#64;var string
     */
    protected $description = 'Send drip e-mails to a user';

    /**
     * The drip e-mail service.
     *
     * &#64;var DripEmailer
     */
    protected $drip;

    /**
     * Create a new command instance.
     *
     * &#64;param  DripEmailer  $drip
     * &#64;return void
     */
    public function __construct(DripEmailer $drip)
    {
        parent::__construct();

        $this-&gt;drip = $drip;
    }

    /**
     * Execute the console command.
     *
     * &#64;return mixed
     */
    public function handle()
    {
        $this-&gt;drip-&gt;send(User::find($this-&gt;argument('user')));
    }
}
</pre>
<p><a name="command-io"></a></p>
</div>
</div>
<div class="section" id="command-i-o">
<span id="command-i-o"></span><h2>Command I/O<a class="headerlink" href="#command-i-o" title="Permalink to this headline">¶</a></h2>
<p><a name="defining-input-expectations"></a></p>
<div class="section" id="defining-input-expectations">
<span id="defining-input-expectations"></span><h3>Defining Input Expectations<a class="headerlink" href="#defining-input-expectations" title="Permalink to this headline">¶</a></h3>
<p>When writing console commands, it is common to gather input from the user through arguments or options. Laravel makes it very convenient to define the input you expect from the user using the <code class="docutils literal"><span class="pre">signature</span></code> property on your commands. The <code class="docutils literal"><span class="pre">signature</span></code> property allows you to define the name, arguments, and options for the command in a single, expressive, route-like syntax.</p>
<p>All user supplied arguments and options are wrapped in curly braces. In the following example, the command defines one <strong>required</strong> argument: <code class="docutils literal"><span class="pre">user</span></code>:</p>
<pre class="literal-block">
/**
 * The name and signature of the console command.
 *
 * &#64;var string
 */
protected $signature = 'email:send {user}';
</pre>
<p>You may also make arguments optional and define default values for optional arguments:</p>
<pre class="literal-block">
// Optional argument...
email:send {user?}

// Optional argument with default value...
email:send {user=foo}
</pre>
<p>Options, like arguments, are also a form of user input. However, they are prefixed by two hyphens (<code class="docutils literal"><span class="pre">--</span></code>) when they are specified on the command line. We can define options in the signature like so:</p>
<pre class="literal-block">
/**
 * The name and signature of the console command.
 *
 * &#64;var string
 */
protected $signature = 'email:send {user} {--queue}';
</pre>
<p>In this example, the <code class="docutils literal"><span class="pre">--queue</span></code> switch may be specified when calling the Artisan command. If the <code class="docutils literal"><span class="pre">--queue</span></code> switch is passed, the value of the option will be <code class="docutils literal"><span class="pre">true</span></code>. Otherwise, the value will be <code class="docutils literal"><span class="pre">false</span></code>:</p>
<pre class="literal-block">
php artisan email:send 1 --queue
</pre>
<p>You may also specify that the option should be assigned a value by the user by suffixing the option name with a <code class="docutils literal"><span class="pre">=</span></code> sign, indicating that a value should be provided:</p>
<pre class="literal-block">
/**
 * The name and signature of the console command.
 *
 * &#64;var string
 */
protected $signature = 'email:send {user} {--queue=}';
</pre>
<p>In this example, the user may pass a value for the option like so:</p>
<pre class="literal-block">
php artisan email:send 1 --queue=default
</pre>
<p>You may also assign default values to options:</p>
<pre class="literal-block">
email:send {user} {--queue=default}
</pre>
<div class="section" id="input-descriptions">
<span id="input-descriptions"></span><h4>Input Descriptions<a class="headerlink" href="#input-descriptions" title="Permalink to this headline">¶</a></h4>
<p>You may assign descriptions to input arguments and options by separating the parameter from the description using a colon:</p>
<pre class="literal-block">
/**
 * The name and signature of the console command.
 *
 * &#64;var string
 */
protected $signature = 'email:send
                        {user : The ID of the user}
                        {--queue= : Whether the job should be queued}';
</pre>
<p><a name="retrieving-input"></a></p>
</div>
</div>
<div class="section" id="retrieving-input">
<span id="retrieving-input"></span><h3>Retrieving Input<a class="headerlink" href="#retrieving-input" title="Permalink to this headline">¶</a></h3>
<p>While your command is executing, you will obviously need to access the values for the arguments and options accepted by your command. To do so, you may use the <code class="docutils literal"><span class="pre">argument</span></code> and <code class="docutils literal"><span class="pre">option</span></code> methods:</p>
<p>To retrieve the value of an argument, use the <code class="docutils literal"><span class="pre">argument</span></code> method:</p>
<pre class="literal-block">
/**
 * Execute the console command.
 *
 * &#64;return mixed
 */
public function handle()
{
    $userId = $this-&gt;argument('user');

    //
}
</pre>
<p>If you need to retrieve all of the arguments as an <code class="docutils literal"><span class="pre">array</span></code>, call <code class="docutils literal"><span class="pre">argument</span></code> with no parameters:</p>
<pre class="literal-block">
$arguments = $this-&gt;argument();
</pre>
<p>Options may be retrieved just as easily as arguments using the <code class="docutils literal"><span class="pre">option</span></code> method. Like the <code class="docutils literal"><span class="pre">argument</span></code> method, you may call <code class="docutils literal"><span class="pre">option</span></code> without any parameters in order to retrieve all of the options as an <code class="docutils literal"><span class="pre">array</span></code>:</p>
<pre class="literal-block">
// Retrieve a specific option...
$queueName = $this-&gt;option('queue');

// Retrieve all options...
$options = $this-&gt;option();
</pre>
<p>If the argument or option does not exist, <code class="docutils literal"><span class="pre">null</span></code> will be returned.</p>
<p><a name="prompting-for-input"></a></p>
</div>
<div class="section" id="prompting-for-input">
<span id="prompting-for-input"></span><h3>Prompting For Input<a class="headerlink" href="#prompting-for-input" title="Permalink to this headline">¶</a></h3>
<p>In addition to displaying output, you may also ask the user to provide input during the execution of your command. The <code class="docutils literal"><span class="pre">ask</span></code> method will prompt the user with the given question, accept their input, and then return the user&#8217;s input back to your command:</p>
<pre class="literal-block">
/**
 * Execute the console command.
 *
 * &#64;return mixed
 */
public function handle()
{
    $name = $this-&gt;ask('What is your name?');
}
</pre>
<p>The <code class="docutils literal"><span class="pre">secret</span></code> method is similar to <code class="docutils literal"><span class="pre">ask</span></code>, but the user&#8217;s input will not be visible to them as they type in the console. This method is useful when asking for sensitive information such as a password:</p>
<pre class="literal-block">
$password = $this-&gt;secret('What is the password?');
</pre>
<div class="section" id="asking-for-confirmation">
<span id="asking-for-confirmation"></span><h4>Asking For Confirmation<a class="headerlink" href="#asking-for-confirmation" title="Permalink to this headline">¶</a></h4>
<p>If you need to ask the user for a simple confirmation, you may use the <code class="docutils literal"><span class="pre">confirm</span></code> method. By default, this method will return <code class="docutils literal"><span class="pre">false</span></code>. However, if the user enters <code class="docutils literal"><span class="pre">y</span></code> in response to the prompt, the method will return <code class="docutils literal"><span class="pre">true</span></code>.</p>
<pre class="literal-block">
if ($this-&gt;confirm('Do you wish to continue? [y|N]')) {
    //
}
</pre>
</div>
<div class="section" id="giving-the-user-a-choice">
<span id="giving-the-user-a-choice"></span><h4>Giving The User A Choice<a class="headerlink" href="#giving-the-user-a-choice" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">anticipate</span></code> method can be used to provided autocompletion for possible choices. The user can still choose any answer, regardless of the choices.</p>
<pre class="literal-block">
$name = $this-&gt;anticipate('What is your name?', ['Taylor', 'Dayle']);
</pre>
<p>If you need to give the user a predefined set of choices, you may use the <code class="docutils literal"><span class="pre">choice</span></code> method. The user chooses the index of the answer, but the value of the answer will be returned to you. You may set the default value to be returned if nothing is chosen:</p>
<pre class="literal-block">
$name = $this-&gt;choice('What is your name?', ['Taylor', 'Dayle'], false);
</pre>
<p><a name="writing-output"></a></p>
</div>
</div>
<div class="section" id="writing-output">
<span id="writing-output"></span><h3>Writing Output<a class="headerlink" href="#writing-output" title="Permalink to this headline">¶</a></h3>
<p>To send output to the console, use the <code class="docutils literal"><span class="pre">info</span></code>, <code class="docutils literal"><span class="pre">comment</span></code>, <code class="docutils literal"><span class="pre">question</span></code> and <code class="docutils literal"><span class="pre">error</span></code> methods. Each of these methods will use the appropriate ANSI colors for their purpose.</p>
<p>To display an information message to the user, use the <code class="docutils literal"><span class="pre">info</span></code> method. Typically, this will display in the console as green text:</p>
<pre class="literal-block">
/**
 * Execute the console command.
 *
 * &#64;return mixed
 */
public function handle()
{
    $this-&gt;info('Display this on the screen');
}
</pre>
<p>To display an error message, use the <code class="docutils literal"><span class="pre">error</span></code> method. Error message text is typically displayed in red:</p>
<pre class="literal-block">
$this-&gt;error('Something went wrong!');
</pre>
<div class="section" id="table-layouts">
<span id="table-layouts"></span><h4>Table Layouts<a class="headerlink" href="#table-layouts" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">table</span></code> method makes it easy to correctly format multiple rows / columns of data. Just pass in the headers and rows to the method. The width and height will be dynamically calculated based on the given data:</p>
<pre class="literal-block">
$headers = ['Name', 'Email'];

$users = App\User::all(['name', 'email'])-&gt;toArray();

$this-&gt;table($headers, $users);
</pre>
</div>
<div class="section" id="progress-bars">
<span id="progress-bars"></span><h4>Progress Bars<a class="headerlink" href="#progress-bars" title="Permalink to this headline">¶</a></h4>
<p>For long running tasks, it could be helpful to show a progress indicator. Using the output object, we can start, advance and stop the Progress Bar. You have to define the number of steps when you start the progress, then advance the Progress Bar after each step:</p>
<pre class="literal-block">
$users = App\User::all();

$bar = $this-&gt;output-&gt;createProgressBar(count($users));

foreach ($users as $user) {
    $this-&gt;performTask($user);

    $bar-&gt;advance();
}

$bar-&gt;finish();
</pre>
<p>For more advanced options, check out the <a class="reference external" href="http://symfony.com/doc/2.7/components/console/helpers/progressbar.html">Symfony Progress Bar component documentation</a>.</p>
<p><a name="registering-commands"></a></p>
</div>
</div>
</div>
<div class="section" id="registering-commands">
<span id="registering-commands"></span><h2>Registering Commands<a class="headerlink" href="#registering-commands" title="Permalink to this headline">¶</a></h2>
<p>Once your command is finished, you need to register it with Artisan so it will be available for use. This is done within the <code class="docutils literal"><span class="pre">app/Console/Kernel.php</span></code> file.</p>
<p>Within this file, you will find a list of commands in the <code class="docutils literal"><span class="pre">commands</span></code> property. To register your command, simply add the class name to the list. When Artisan boots, all the commands listed in this property will be resolved by the <a class="reference external" href="container.html">service container</a> and registered with Artisan:</p>
<pre class="literal-block">
protected $commands = [
    'App\Console\Commands\SendEmails'
];
</pre>
<p><a name="calling-commands-via-code"></a></p>
</div>
<div class="section" id="calling-commands-via-code">
<span id="calling-commands-via-code"></span><h2>Calling Commands Via Code<a class="headerlink" href="#calling-commands-via-code" title="Permalink to this headline">¶</a></h2>
<p>Sometimes you may wish to execute an Artisan command outside of the CLI. For example, you may wish to fire an Artisan command from a route or controller. You may use the <code class="docutils literal"><span class="pre">call</span></code> method on the <code class="docutils literal"><span class="pre">Artisan</span></code> facade to accomplish this. The <code class="docutils literal"><span class="pre">call</span></code> method accepts the name of the command as the first argument, and an array of command parameters as the second argument. The exit code will be returned:</p>
<pre class="literal-block">
Route::get('/foo', function () {
    $exitCode = Artisan::call('email:send', [
        'user' =&gt; 1, '--queue' =&gt; 'default'
    ]);

    //
});
</pre>
<p>Using the <code class="docutils literal"><span class="pre">queue</span></code> method on the <code class="docutils literal"><span class="pre">Artisan</span></code> facade, you may even queue Artisan commands so they are processed in the background by your <a class="reference external" href="queues.html">queue workers</a>:</p>
<pre class="literal-block">
Route::get('/foo', function () {
    Artisan::queue('email:send', [
        'user' =&gt; 1, '--queue' =&gt; 'default'
    ]);

    //
});
</pre>
<p>If you need to specify the value of an option that does not accept string values, such as the <code class="docutils literal"><span class="pre">--force</span></code> flag on the <code class="docutils literal"><span class="pre">migrate:refresh</span></code> command, you may pass a boolean <code class="docutils literal"><span class="pre">true</span></code> or <code class="docutils literal"><span class="pre">false</span></code>:</p>
<pre class="literal-block">
$exitCode = Artisan::call('migrate:refresh', [
    '--force' =&gt; true,
]);
</pre>
<div class="section" id="calling-commands-from-other-commands">
<span id="calling-commands-from-other-commands"></span><h3>Calling Commands From Other Commands<a class="headerlink" href="#calling-commands-from-other-commands" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you may wish to call other commands from an existing Artisan command. You may do so using the <code class="docutils literal"><span class="pre">call</span></code> method. This <code class="docutils literal"><span class="pre">call</span></code> method accepts the command name and an array of command parameters:</p>
<pre class="literal-block">
/**
 * Execute the console command.
 *
 * &#64;return mixed
 */
public function handle()
{
    $this-&gt;call('email:send', [
        'user' =&gt; 1, '--queue' =&gt; 'default'
    ]);

    //
}
</pre>
<p>If you would like to call another console command and suppress all of its output, you may use the <code class="docutils literal"><span class="pre">callSilent</span></code> method. The <code class="docutils literal"><span class="pre">callSilent</span></code> method has the same signature as the <code class="docutils literal"><span class="pre">call</span></code> method:</p>
<pre class="literal-block">
$this-&gt;callSilent('email:send', [
    'user' =&gt; 1, '--queue' =&gt; 'default'
]);
</pre>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, The Weezqyd.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>