

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Eloquent: Mutators &mdash; Laravel 5 Documentation 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Laravel 5 Documentation 1.0 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Laravel 5 Documentation
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <!-- Local TOC -->
                <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Eloquent: Mutators</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#accessors-mutators">Accessors &amp; Mutators</a><ul>
<li><a class="reference internal" href="#defining-an-accessor">Defining An Accessor</a></li>
<li><a class="reference internal" href="#defining-a-mutator">Defining A Mutator</a></li>
</ul>
</li>
<li><a class="reference internal" href="#date-mutators">Date Mutators</a></li>
<li><a class="reference internal" href="#attribute-casting">Attribute Casting</a><ul>
<li><a class="reference internal" href="#array-casting">Array Casting</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Laravel 5 Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Eloquent: Mutators</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/eloquent-mutators.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="eloquent-mutators">
<span id="eloquent-mutators"></span><h1>Eloquent: Mutators<a class="headerlink" href="#eloquent-mutators" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="#introduction">Introduction</a></li>
<li><a class="reference external" href="#accessors-and-mutators">Accessors &amp; Mutators</a></li>
<li><a class="reference external" href="#date-mutators">Date Mutators</a></li>
<li><a class="reference external" href="#attribute-casting">Attribute Casting</a></li>
</ul>
<p><a name="introduction"></a></p>
<div class="section" id="introduction">
<span id="introduction"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Accessors and mutators allow you to format Eloquent attributes when retrieving them from a model or setting their value. For example, you may want to use the <a class="reference external" href="encryption.html">Laravel encrypter</a> to encrypt a value while it is stored in the database, and then automatically decrypt the attribute when you access it on an Eloquent model.</p>
<p>In addition to custom accessors and mutators, Eloquent can also automatically cast date fields to <a class="reference external" href="https://github.com/briannesbitt/Carbon">Carbon</a> instances or even <a class="reference external" href="#attribute-casting">cast text fields to JSON</a>.</p>
<p><a name="accessors-and-mutators"></a></p>
</div>
<div class="section" id="accessors-mutators">
<span id="accessors-mutators"></span><h2>Accessors &amp; Mutators<a class="headerlink" href="#accessors-mutators" title="Permalink to this headline">¶</a></h2>
<div class="section" id="defining-an-accessor">
<span id="defining-an-accessor"></span><h3>Defining An Accessor<a class="headerlink" href="#defining-an-accessor" title="Permalink to this headline">¶</a></h3>
<p>To define an accessor, create a <code class="docutils literal"><span class="pre">getFooAttribute</span></code> method on your model where <code class="docutils literal"><span class="pre">Foo</span></code> is the &#8220;camel&#8221; cased name of the column you wish to access. In this example, we&#8217;ll define an accessor for the <code class="docutils literal"><span class="pre">first_name</span></code> attribute. The accessor will automatically be called by Eloquent when attempting to retrieve the value of <code class="docutils literal"><span class="pre">first_name</span></code>:</p>
<pre class="literal-block">
&lt;?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class User extends Model
{
    /**
     * Get the user's first name.
     *
     * &#64;param  string  $value
     * &#64;return string
     */
    public function getFirstNameAttribute($value)
    {
        return ucfirst($value);
    }
}
</pre>
<p>As you can see, the original value of the column is passed to the accessor, allowing you to manipulate and return the value. To access the value of the mutator, you may simply access the <code class="docutils literal"><span class="pre">first_name</span></code> attribute:</p>
<pre class="literal-block">
$user = App\User::find(1);

$firstName = $user-&gt;first_name;
</pre>
</div>
<div class="section" id="defining-a-mutator">
<span id="defining-a-mutator"></span><h3>Defining A Mutator<a class="headerlink" href="#defining-a-mutator" title="Permalink to this headline">¶</a></h3>
<p>To define a mutator, define a <code class="docutils literal"><span class="pre">setFooAttribute</span></code> method on your model where <code class="docutils literal"><span class="pre">Foo</span></code> is the &#8220;camel&#8221; cased name of the column you wish to access. So, again, let&#8217;s define a mutator for the <code class="docutils literal"><span class="pre">first_name</span></code> attribute. This mutator will be automatically called when we attempt to set the value of the <code class="docutils literal"><span class="pre">first_name</span></code> attribute on the model:</p>
<pre class="literal-block">
&lt;?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class User extends Model
{
    /**
     * Set the user's first name.
     *
     * &#64;param  string  $value
     * &#64;return string
     */
    public function setFirstNameAttribute($value)
    {
        $this-&gt;attributes['first_name'] = strtolower($value);
    }
}
</pre>
<p>The mutator will receive the value that is being set on the attribute, allowing you to manipulate the value and set the manipulated value on the Eloquent model&#8217;s internal <code class="docutils literal"><span class="pre">$attributes</span></code> property. So, for example, if we attempt to set the <code class="docutils literal"><span class="pre">first_name</span></code> attribute to <code class="docutils literal"><span class="pre">Sally</span></code>:</p>
<pre class="literal-block">
$user = App\User::find(1);

$user-&gt;first_name = 'Sally';
</pre>
<p>In this example, the <code class="docutils literal"><span class="pre">setFirstNameAttribute</span></code> function will be called with the value <code class="docutils literal"><span class="pre">Sally</span></code>. The mutator will then apply the <code class="docutils literal"><span class="pre">strtolower</span></code> function to the name and set its value in the internal <code class="docutils literal"><span class="pre">$attributes</span></code> array.</p>
<p><a name="date-mutators"></a></p>
</div>
</div>
<div class="section" id="date-mutators">
<span id="date-mutators"></span><h2>Date Mutators<a class="headerlink" href="#date-mutators" title="Permalink to this headline">¶</a></h2>
<p>By default, Eloquent will convert the <code class="docutils literal"><span class="pre">created_at</span></code> and <code class="docutils literal"><span class="pre">updated_at</span></code> columns to instances of <a class="reference external" href="https://github.com/briannesbitt/Carbon">Carbon</a>, which provides an assortment of helpful methods, and extends the native PHP <code class="docutils literal"><span class="pre">DateTime</span></code> class.</p>
<p>You may customize which fields are automatically mutated, and even completely disable this mutation, by overriding the <code class="docutils literal"><span class="pre">$dates</span></code> property of your model:</p>
<pre class="literal-block">
&lt;?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class User extends Model
{
    /**
     * The attributes that should be mutated to dates.
     *
     * &#64;var array
     */
    protected $dates = ['created_at', 'updated_at', 'disabled_at'];
}
</pre>
<p>When a column is considered a date, you may set its value to a UNIX timestamp, date string (<code class="docutils literal"><span class="pre">Y-m-d</span></code>), date-time string, and of course a <code class="docutils literal"><span class="pre">DateTime</span></code> / <code class="docutils literal"><span class="pre">Carbon</span></code> instance, and the date&#8217;s value will automatically be correctly stored in your database:</p>
<pre class="literal-block">
$user = App\User::find(1);

$user-&gt;disabled_at = Carbon::now();

$user-&gt;save();
</pre>
<p>As noted above, when retrieving attributes that are listed in your <code class="docutils literal"><span class="pre">$dates</span></code> property, they will automatically be cast to <a class="reference external" href="https://github.com/briannesbitt/Carbon">Carbon</a> instances, allowing you to use any of Carbon&#8217;s methods on your attributes:</p>
<pre class="literal-block">
$user = App\User::find(1);

return $user-&gt;disabled_at-&gt;getTimestamp();
</pre>
<p>By default, timestamps are formatted as <code class="docutils literal"><span class="pre">'Y-m-d</span> <span class="pre">H:i:s'</span></code>. If you need to customize the timestamp format, set the <code class="docutils literal"><span class="pre">$dateFormat</span></code> property on your model. This property determines how date attributes are stored in the database, as well as their format when the model is serialized to an array or JSON:</p>
<pre class="literal-block">
&lt;?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class Flight extends Model
{
    /**
     * The storage format of the model's date columns.
     *
     * &#64;var string
     */
    protected $dateFormat = 'U';
}
</pre>
<p><a name="attribute-casting"></a></p>
</div>
<div class="section" id="attribute-casting">
<span id="attribute-casting"></span><h2>Attribute Casting<a class="headerlink" href="#attribute-casting" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">$casts</span></code> property on your model provides a convenient method of converting attributes to common data types. The <code class="docutils literal"><span class="pre">$casts</span></code> property should be an array where the key is the name of the attribute being cast, while the value is the type you wish to cast to the column to. The supported cast types are: <code class="docutils literal"><span class="pre">integer</span></code>, <code class="docutils literal"><span class="pre">real</span></code>, <code class="docutils literal"><span class="pre">float</span></code>, <code class="docutils literal"><span class="pre">double</span></code>, <code class="docutils literal"><span class="pre">string</span></code>, <code class="docutils literal"><span class="pre">boolean</span></code>, <code class="docutils literal"><span class="pre">object</span></code> and <code class="docutils literal"><span class="pre">array</span></code>.</p>
<p>For example, let&#8217;s cast the <code class="docutils literal"><span class="pre">is_admin</span></code> attribute, which is stored in our database as an integer (<code class="docutils literal"><span class="pre">0</span></code> or <code class="docutils literal"><span class="pre">1</span></code>) to a boolean value:</p>
<pre class="literal-block">
&lt;?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class User extends Model
{
    /**
     * The attributes that should be casted to native types.
     *
     * &#64;var array
     */
    protected $casts = [
        'is_admin' =&gt; 'boolean',
    ];
}
</pre>
<p>Now the <code class="docutils literal"><span class="pre">is_admin</span></code> attribute will always be cast to a boolean when you access it, even if the underlying value is stored in the database as an integer:</p>
<pre class="literal-block">
$user = App\User::find(1);

if ($user-&gt;is_admin) {
    //
}
</pre>
<div class="section" id="array-casting">
<span id="array-casting"></span><h3>Array Casting<a class="headerlink" href="#array-casting" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">array</span></code> cast type is particularly useful when working with columns that are stored as serialized JSON. For example, if your database has a <code class="docutils literal"><span class="pre">TEXT</span></code> field type that contains serialized JSON, adding the <code class="docutils literal"><span class="pre">array</span></code> cast to that attribute will automatically deserialize the attribute to a PHP array when you access it on your Eloquent model:</p>
<pre class="literal-block">
&lt;?php

namespace App;

use Illuminate\Database\Eloquent\Model;

class User extends Model
{
    /**
     * The attributes that should be casted to native types.
     *
     * &#64;var array
     */
    protected $casts = [
        'options' =&gt; 'array',
    ];
}
</pre>
<p>Once the cast is defined, you may access the <code class="docutils literal"><span class="pre">options</span></code> attribute and it will automatically be deserialized from JSON into a PHP array. When you set the value of the <code class="docutils literal"><span class="pre">options</span></code> attribute, the given array will automatically be serialized back into JSON for storage:</p>
<pre class="literal-block">
$user = App\User::find(1);

$options = $user-&gt;options;

$options['key'] = 'value';

$user-&gt;options = $options;

$user-&gt;save();
</pre>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, The Weezqyd.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>