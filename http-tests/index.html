<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Http tests - Laravel 5.4 Official Documentation</title>
      
      
      
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Laravel 5.4 Official Documentation">
    <meta property="og:image" content="None/../">
    <meta name="apple-mobile-web-app-title" content="Laravel 5.4 Official Documentation">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../assets/fonts/icon.eot?52m981');
      	src: url('../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../assets/stylesheets/application-a422ff04cc.css">
    
      <link rel="stylesheet" href="../assets/stylesheets/palettes-05ab2406df.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
    <script src="../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class="palette-primary-teal palette-accent-green">
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
          </span>
        
        Http tests
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="/" class="project">
    <div class="banner">
      
      <div class="name">
        <strong>
          Laravel 5.4 Official Documentation
          <span class="version">
            
          </span>
        </strong>
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Home" href="..">
      Home
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Apis" href="../apis/">
      Apis
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Artisan" href="../artisan/">
      Artisan
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Authentication" href="../authentication/">
      Authentication
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Authorization" href="../authorization/">
      Authorization
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Billing" href="../billing/">
      Billing
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Blade" href="../blade/">
      Blade
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Broadcasting" href="../broadcasting/">
      Broadcasting
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Cache" href="../cache/">
      Cache
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Collections" href="../collections/">
      Collections
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Configuration" href="../configuration/">
      Configuration
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Container" href="../container/">
      Container
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Contracts" href="../contracts/">
      Contracts
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Contributing" href="../contributing/">
      Contributing
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Contributions" href="../contributions/">
      Contributions
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Controllers" href="../controllers/">
      Controllers
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Csrf" href="../csrf/">
      Csrf
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Database testing" href="../database-testing/">
      Database testing
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Database" href="../database/">
      Database
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Documentation" href="../documentation/">
      Documentation
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Dusk" href="../dusk/">
      Dusk
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Eloquent collections" href="../eloquent-collections/">
      Eloquent collections
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Eloquent mutators" href="../eloquent-mutators/">
      Eloquent mutators
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Eloquent relationships" href="../eloquent-relationships/">
      Eloquent relationships
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Eloquent serialization" href="../eloquent-serialization/">
      Eloquent serialization
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Eloquent" href="../eloquent/">
      Eloquent
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Encryption" href="../encryption/">
      Encryption
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Envoy" href="../envoy/">
      Envoy
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Errors" href="../errors/">
      Errors
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Events" href="../events/">
      Events
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Facades" href="../facades/">
      Facades
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Filesystem" href="../filesystem/">
      Filesystem
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Frontend" href="../frontend/">
      Frontend
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Hashing" href="../hashing/">
      Hashing
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Helpers" href="../helpers/">
      Helpers
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Homestead" href="../homestead/">
      Homestead
    </a>
    
  </li>

          
            
  <li>
    <a class="current" title="Http tests" href="./">
      Http tests
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Introduction" href="#introduction">
                Introduction
              </a>
            </li>
          
            <li class="anchor">
              <a title="Session / Authentication" href="#session-authentication">
                Session / Authentication
              </a>
            </li>
          
            <li class="anchor">
              <a title="Testing JSON APIs" href="#testing-json-apis">
                Testing JSON APIs
              </a>
            </li>
          
            <li class="anchor">
              <a title="Testing File Uploads" href="#testing-file-uploads">
                Testing File Uploads
              </a>
            </li>
          
            <li class="anchor">
              <a title="Available Assertions" href="#available-assertions">
                Available Assertions
              </a>
            </li>
          
        </ul>
      
    
  </li>

          
            
  <li>
    <a class="" title="Installation" href="../installation/">
      Installation
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="License" href="../license/">
      License
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Lifecycle" href="../lifecycle/">
      Lifecycle
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Localization" href="../localization/">
      Localization
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Mail" href="../mail/">
      Mail
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Middleware" href="../middleware/">
      Middleware
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Migrations" href="../migrations/">
      Migrations
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Mix" href="../mix/">
      Mix
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Mocking" href="../mocking/">
      Mocking
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Notifications" href="../notifications/">
      Notifications
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Packages" href="../packages/">
      Packages
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Pagination" href="../pagination/">
      Pagination
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Passport" href="../passport/">
      Passport
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Passwords" href="../passwords/">
      Passwords
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Providers" href="../providers/">
      Providers
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Queries" href="../queries/">
      Queries
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Queues" href="../queues/">
      Queues
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Redirects" href="../redirects/">
      Redirects
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Redis" href="../redis/">
      Redis
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Releases" href="../releases/">
      Releases
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Requests" href="../requests/">
      Requests
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Responses" href="../responses/">
      Responses
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Routing" href="../routing/">
      Routing
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Scheduling" href="../scheduling/">
      Scheduling
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Scout" href="../scout/">
      Scout
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Seeding" href="../seeding/">
      Seeding
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Session" href="../session/">
      Session
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Structure" href="../structure/">
      Structure
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Testing" href="../testing/">
      Testing
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Upgrade" href="../upgrade/">
      Upgrade
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Valet" href="../valet/">
      Valet
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Validation" href="../validation/">
      Validation
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Views" href="../views/">
      Views
    </a>
    
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="http-tests">HTTP Tests</h1>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#session-and-authentication">Session / Authentication</a></li>
<li><a href="#testing-json-apis">Testing JSON APIs</a></li>
<li><a href="#testing-file-uploads">Testing File Uploads</a></li>
<li><a href="#available-assertions">Available Assertions</a></li>
</ul>
<p><a name="introduction"></a></p>
<h2 id="introduction">Introduction</h2>
<p>Laravel provides a very fluent API for making HTTP requests to your application and examining the output. For example, take a look at the test defined below:</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span> <span class="nx">Tests</span><span class="err">\</span><span class="nx">Feature</span><span class="p">;</span>

<span class="nx">use</span> <span class="nx">Tests</span><span class="err">\</span><span class="nx">TestCase</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Foundation</span><span class="err">\</span><span class="nx">Testing</span><span class="err">\</span><span class="nx">WithoutMiddleware</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Foundation</span><span class="err">\</span><span class="nx">Testing</span><span class="err">\</span><span class="nx">DatabaseMigrations</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Foundation</span><span class="err">\</span><span class="nx">Testing</span><span class="err">\</span><span class="nx">DatabaseTransactions</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">ExampleTest</span> <span class="kr">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * A basic test example.</span>
<span class="cm">     *</span>
<span class="cm">     * @return void</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">testBasicTest</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">$response</span> <span class="o">=</span> <span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>

        <span class="nx">$response</span><span class="o">-&gt;</span><span class="nx">assertStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>The <code>get</code> method makes a <code>GET</code> request into the application, while the <code>assertStatus</code> method asserts that the returned response should have the given HTTP status code. In addition to this simple assertion, Laravel also contains a variety of assertions for inspecting the response headers, content, JSON structure, and more.</p>
<p><a name="session-and-authentication"></a></p>
<h2 id="session-authentication">Session / Authentication</h2>
<p>Laravel provides several helpers for working with the session during HTTP testing. First, you may set the session data to a given array using the <code>withSession</code> method. This is useful for loading the session with data before issuing a request to your application:</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="kr">class</span> <span class="nx">ExampleTest</span> <span class="kr">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">testApplication</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">$response</span> <span class="o">=</span> <span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">withSession</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
                         <span class="o">-&gt;</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Of course, one common use of the session is for maintaining state for the authenticated user. The <code>actingAs</code> helper method provides a simple way to authenticate a given user as the current user. For example, we may use a <a href="../docs/{{version}}/database-testing#writing-factories">model factory</a> to generate and authenticate a user:</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">use</span> <span class="nx">App</span><span class="err">\</span><span class="nx">User</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">ExampleTest</span> <span class="kr">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">testApplication</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">$user</span> <span class="o">=</span> <span class="nx">factory</span><span class="p">(</span><span class="nx">User</span><span class="o">::</span><span class="kr">class</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">create</span><span class="p">();</span>

        <span class="nx">$response</span> <span class="o">=</span> <span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">actingAs</span><span class="p">(</span><span class="nx">$user</span><span class="p">)</span>
                         <span class="o">-&gt;</span><span class="nx">withSession</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
                         <span class="o">-&gt;</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>You may also specify which guard should be used to authenticate the given user by passing the guard name as the second argument to the <code>actingAs</code> method:</p>
<div class="codehilite"><pre><span></span>$this-&gt;actingAs($user, &#39;api&#39;)
</pre></div>


<p><a name="testing-json-apis"></a></p>
<h2 id="testing-json-apis">Testing JSON APIs</h2>
<p>Laravel also provides several helpers for testing JSON APIs and their responses. For example, the <code>json</code>, <code>get</code>, <code>post</code>, <code>put</code>, <code>patch</code>, and <code>delete</code> methods may be used to issue requests with various HTTP verbs. You may also easily pass data and headers to these methods. To get started, let's write a test to make a <code>POST</code> request to <code>/user</code> and assert that the expected data was returned:</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="kr">class</span> <span class="nx">ExampleTest</span> <span class="kr">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * A basic functional test example.</span>
<span class="cm">     *</span>
<span class="cm">     * @return void</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">testBasicExample</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">$response</span> <span class="o">=</span> <span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">json</span><span class="p">(</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sally&#39;</span><span class="p">]);</span>

        <span class="nx">$response</span>
            <span class="o">-&gt;</span><span class="nx">assertStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="nx">assertJson</span><span class="p">([</span>
                <span class="s1">&#39;created&#39;</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<blockquote>
<p>{tip} The <code>assertJson</code> method converts the response to an array and utilizes <code>PHPUnit::assertArraySubset</code> to verify that the given array exists within the JSON response returned by the application. So, if there are other properties in the JSON response, this test will still pass as long as the given fragment is present.</p>
</blockquote>
<p><a name="verifying-exact-match"></a></p>
<h3 id="verifying-exact-match">Verifying Exact Match</h3>
<p>If you would like to verify that the given array is an <strong>exact</strong> match for the JSON returned by the application, you should use the <code>assertExactJson</code> method:</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="kr">class</span> <span class="nx">ExampleTest</span> <span class="kr">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="cm">/**</span>
<span class="cm">     * A basic functional test example.</span>
<span class="cm">     *</span>
<span class="cm">     * @return void</span>
<span class="cm">     */</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">testBasicExample</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">$response</span> <span class="o">=</span> <span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">json</span><span class="p">(</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sally&#39;</span><span class="p">]);</span>

        <span class="nx">$response</span>
            <span class="o">-&gt;</span><span class="nx">assertStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="nx">assertExactJson</span><span class="p">([</span>
                <span class="s1">&#39;created&#39;</span> <span class="o">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
            <span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p><a name="testing-file-uploads"></a></p>
<h2 id="testing-file-uploads">Testing File Uploads</h2>
<p>The <code>Illuminate\Http\UploadedFile</code> class provides a <code>fake</code> method which may be used to generate dummy files or images for testing. This, combined with the <code>Storage</code> facade's <code>fake</code> method greatly simplifies the testing of file uploads. For example, you may combine these two features to easily test an avatar upload form:</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nx">namespace</span> <span class="nx">Tests</span><span class="err">\</span><span class="nx">Feature</span><span class="p">;</span>

<span class="nx">use</span> <span class="nx">Tests</span><span class="err">\</span><span class="nx">TestCase</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Http</span><span class="err">\</span><span class="nx">UploadedFile</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Support</span><span class="err">\</span><span class="nx">Facades</span><span class="err">\</span><span class="nx">Storage</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Foundation</span><span class="err">\</span><span class="nx">Testing</span><span class="err">\</span><span class="nx">WithoutMiddleware</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Foundation</span><span class="err">\</span><span class="nx">Testing</span><span class="err">\</span><span class="nx">DatabaseMigrations</span><span class="p">;</span>
<span class="nx">use</span> <span class="nx">Illuminate</span><span class="err">\</span><span class="nx">Foundation</span><span class="err">\</span><span class="nx">Testing</span><span class="err">\</span><span class="nx">DatabaseTransactions</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">ExampleTest</span> <span class="kr">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="kr">public</span> <span class="kd">function</span> <span class="nx">testAvatarUpload</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">Storage</span><span class="o">::</span><span class="nx">fake</span><span class="p">(</span><span class="s1">&#39;avatars&#39;</span><span class="p">);</span>

        <span class="nx">$response</span> <span class="o">=</span> <span class="nx">$this</span><span class="o">-&gt;</span><span class="nx">json</span><span class="p">(</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="s1">&#39;/avatar&#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="s1">&#39;avatar&#39;</span> <span class="o">=&gt;</span> <span class="nx">UploadedFile</span><span class="o">::</span><span class="nx">fake</span><span class="p">()</span><span class="o">-&gt;</span><span class="nx">image</span><span class="p">(</span><span class="s1">&#39;avatar.jpg&#39;</span><span class="p">)</span>
        <span class="p">]);</span>

        <span class="c1">// Assert the file was stored...</span>
        <span class="nx">Storage</span><span class="o">::</span><span class="nx">disk</span><span class="p">(</span><span class="s1">&#39;avatars&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">assertExists</span><span class="p">(</span><span class="s1">&#39;avatar.jpg&#39;</span><span class="p">);</span>

        <span class="c1">// Assert a file does not exist...</span>
        <span class="nx">Storage</span><span class="o">::</span><span class="nx">disk</span><span class="p">(</span><span class="s1">&#39;avatars&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="nx">assertMissing</span><span class="p">(</span><span class="s1">&#39;missing.jpg&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h4 id="fake-file-customization">Fake File Customization</h4>
<p>When creating files using the <code>fake</code> method, you may specify the width, height, and size of the image in order to better test your validation rules:</p>
<div class="codehilite"><pre><span></span><span class="nt">UploadedFile</span><span class="p">::</span><span class="nd">fake</span><span class="o">()</span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">image</span><span class="o">(</span><span class="s1">&#39;avatar.jpg&#39;</span><span class="o">,</span> <span class="o">$</span><span class="nt">width</span><span class="o">,</span> <span class="o">$</span><span class="nt">height</span><span class="o">)</span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">size</span><span class="o">(</span><span class="nt">100</span><span class="o">);</span>
</pre></div>


<p>In addition to creating images, you may create files of any other type using the <code>create</code> method:</p>
<div class="codehilite"><pre><span></span><span class="nt">UploadedFile</span><span class="p">::</span><span class="nd">fake</span><span class="o">()</span><span class="nt">-</span><span class="o">&gt;</span><span class="nt">create</span><span class="o">(</span><span class="s1">&#39;document.pdf&#39;</span><span class="o">,</span> <span class="o">$</span><span class="nt">sizeInKilobytes</span><span class="o">);</span>
</pre></div>


<p><a name="available-assertions"></a></p>
<h2 id="available-assertions">Available Assertions</h2>
<p>Laravel provides a variety of custom assertion methods for your <a href="https://phpunit.de/">PHPUnit</a> tests. These assertions may be accessed on the response that is returned from the <code>json</code>, <code>get</code>, <code>post</code>, <code>put</code>, and <code>delete</code> test methods:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$response-&gt;assertStatus($code);</code></td>
<td>Assert that the response has a given code.</td>
</tr>
<tr>
<td><code>$response-&gt;assertRedirect($uri);</code></td>
<td>Assert that the response is a redirect to a given URI.</td>
</tr>
<tr>
<td><code>$response-&gt;assertHeader($headerName, $value = null);</code></td>
<td>Assert that the given header is present on the response.</td>
</tr>
<tr>
<td><code>$response-&gt;assertCookie($cookieName, $value = null);</code></td>
<td>Assert that the response contains the given cookie.</td>
</tr>
<tr>
<td><code>$response-&gt;assertPlainCookie($cookieName, $value = null);</code></td>
<td>Assert that the response contains the given cookie (unencrypted).</td>
</tr>
<tr>
<td><code>$response-&gt;assertSessionHas($key, $value = null);</code></td>
<td>Assert that the session contains the given piece of data.</td>
</tr>
<tr>
<td><code>$response-&gt;assertSessionHasErrors(array $keys);</code></td>
<td>Assert that the session contains an error for the given field.</td>
</tr>
<tr>
<td><code>$response-&gt;assertSessionMissing($key);</code></td>
<td>Assert that the session does not contain the given key.</td>
</tr>
<tr>
<td><code>$response-&gt;assertJson(array $data);</code></td>
<td>Assert that the response contains the given JSON data.</td>
</tr>
<tr>
<td><code>$response-&gt;assertJsonFragment(array $data);</code></td>
<td>Assert that the response contains the given JSON fragment.</td>
</tr>
<tr>
<td><code>$response-&gt;assertExactJson(array $data);</code></td>
<td>Assert that the response contains an exact match of the given JSON data.</td>
</tr>
<tr>
<td><code>$response-&gt;assertJsonStructure(array $structure);</code></td>
<td>Assert that the response has a given JSON structure.</td>
</tr>
<tr>
<td><code>$response-&gt;assertViewHas($key, $value = null);</code></td>
<td>Assert that the response view was given a piece of data.</td>
</tr>
</tbody>
</table>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../homestead/" title="Homestead">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Homestead
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../installation/" title="Installation">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Installation
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '..';
      var repo_id  = '';
    </script>
    <script src="../assets/javascripts/application-997097ee0c.js"></script>
    
    
  </body>
</html>