

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Service Providers &mdash; Laravel 5 Documentation 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Laravel 5 Documentation 1.0 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Laravel 5 Documentation
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <!-- Local TOC -->
                <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Service Providers</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#writing-service-providers">Writing Service Providers</a><ul>
<li><a class="reference internal" href="#the-register-method">The Register Method</a></li>
<li><a class="reference internal" href="#the-boot-method">The Boot Method</a><ul>
<li><a class="reference internal" href="#boot-method-dependency-injection">Boot Method Dependency Injection</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#registering-providers">Registering Providers</a></li>
<li><a class="reference internal" href="#deferred-providers">Deferred Providers</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Laravel 5 Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Service Providers</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/providers.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="service-providers">
<span id="service-providers"></span><h1>Service Providers<a class="headerlink" href="#service-providers" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="#introduction">Introduction</a></li>
<li><a class="reference external" href="#writing-service-providers">Writing Service Providers</a><ul>
<li><a class="reference external" href="#the-register-method">The Register Method</a></li>
<li><a class="reference external" href="#the-boot-method">The Boot Method</a></li>
</ul>
</li>
<li><a class="reference external" href="#registering-providers">Registering Providers</a></li>
<li><a class="reference external" href="#deferred-providers">Deferred Providers</a></li>
</ul>
<p><a name="introduction"></a></p>
<div class="section" id="introduction">
<span id="introduction"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Service providers are the central place of all Laravel application bootstrapping. Your own application, as well as all of Laravel&#8217;s core services are bootstrapped via service providers.</p>
<p>But, what do we mean by &#8220;bootstrapped&#8221;? In general, we mean <strong>registering</strong> things, including registering service container bindings, event listeners, middleware, and even routes. Service providers are the central place to configure your application.</p>
<p>If you open the <code class="docutils literal"><span class="pre">config/app.php</span></code> file included with Laravel, you will see a <code class="docutils literal"><span class="pre">providers</span></code> array. These are all of the service provider classes that will be loaded for your application. Of course, many of them are &#8220;deferred&#8221; providers, meaning they will not be loaded on every request, but only when the services they provide are actually needed.</p>
<p>In this overview you will learn how to write your own service providers and register them with your Laravel application.</p>
<p><a name="writing-service-providers"></a></p>
</div>
<div class="section" id="writing-service-providers">
<span id="writing-service-providers"></span><h2>Writing Service Providers<a class="headerlink" href="#writing-service-providers" title="Permalink to this headline">¶</a></h2>
<p>All service providers extend the <code class="docutils literal"><span class="pre">Illuminate\Support\ServiceProvider</span></code> class. This abstract class requires that you define at least one method on your provider: <code class="docutils literal"><span class="pre">register</span></code>. Within the <code class="docutils literal"><span class="pre">register</span></code> method, you should <strong>only bind things into the <a class="reference external" href="/docs/{{version}}/container">service container</a></strong>. You should never attempt to register any event listeners, routes, or any other piece of functionality within the <code class="docutils literal"><span class="pre">register</span></code> method.</p>
<p>The Artisan CLI can easily generate a new provider via the <code class="docutils literal"><span class="pre">make:provider</span></code> command:</p>
<pre class="literal-block">
php artisan make:provider RiakServiceProvider
</pre>
<p><a name="the-register-method"></a></p>
<div class="section" id="the-register-method">
<span id="the-register-method"></span><h3>The Register Method<a class="headerlink" href="#the-register-method" title="Permalink to this headline">¶</a></h3>
<p>As mentioned previously, within the <code class="docutils literal"><span class="pre">register</span></code> method, you should only bind things into the <a class="reference external" href="/docs/{{version}}/container">service container</a>. You should never attempt to register any event listeners, routes, or any other piece of functionality within the <code class="docutils literal"><span class="pre">register</span></code> method. Otherwise, you may accidently use a service that is provided by a service provider which has not loaded yet.</p>
<p>Now, let&#8217;s take a look at a basic service provider:</p>
<pre class="literal-block">
&lt;?php

namespace App\Providers;

use Riak\Connection;
use Illuminate\Support\ServiceProvider;

class RiakServiceProvider extends ServiceProvider
{
    /**
     * Register bindings in the container.
     *
     * &#64;return void
     */
    public function register()
    {
        $this-&gt;app-&gt;singleton('Riak\Contracts\Connection', function ($app) {
            return new Connection(config('riak'));
        });
    }
}
</pre>
<p>This service provider only defines a <code class="docutils literal"><span class="pre">register</span></code> method, and uses that method to define an implementation of <code class="docutils literal"><span class="pre">Riak\Contracts\Connection</span></code> in the service container. If you don&#8217;t understand how the service container works, check out <a class="reference external" href="/docs/{{version}}/container">its documentation</a>.</p>
<p><a name="the-boot-method"></a></p>
</div>
<div class="section" id="the-boot-method">
<span id="the-boot-method"></span><h3>The Boot Method<a class="headerlink" href="#the-boot-method" title="Permalink to this headline">¶</a></h3>
<p>So, what if we need to register a view composer within our service provider? This should be done within the <code class="docutils literal"><span class="pre">boot</span></code> method. <strong>This method is called after all other service providers have been registered</strong>, meaning you have access to all other services that have been registered by the framework:</p>
<pre class="literal-block">
&lt;?php

namespace App\Providers;

use Illuminate\Support\ServiceProvider;

class EventServiceProvider extends ServiceProvider
{
    /**
     * Perform post-registration booting of services.
     *
     * &#64;return void
     */
    public function boot()
    {
        view()-&gt;composer('view', function () {
            //
        });
    }

    /**
     * Register bindings in the container.
     *
     * &#64;return void
     */
    public function register()
    {
        //
    }
}
</pre>
<div class="section" id="boot-method-dependency-injection">
<span id="boot-method-dependency-injection"></span><h4>Boot Method Dependency Injection<a class="headerlink" href="#boot-method-dependency-injection" title="Permalink to this headline">¶</a></h4>
<p>We are able to type-hint dependencies for our <code class="docutils literal"><span class="pre">boot</span></code> method. The <a class="reference external" href="/docs/{{version}}/container">service container</a> will automatically inject any dependencies you need:</p>
<pre class="literal-block">
use Illuminate\Contracts\Routing\ResponseFactory;

public function boot(ResponseFactory $factory)
{
    $factory-&gt;macro('caps', function ($value) {
        //
    });
}
</pre>
<p><a name="registering-providers"></a></p>
</div>
</div>
</div>
<div class="section" id="registering-providers">
<span id="registering-providers"></span><h2>Registering Providers<a class="headerlink" href="#registering-providers" title="Permalink to this headline">¶</a></h2>
<p>All service providers are registered in the <code class="docutils literal"><span class="pre">config/app.php</span></code> configuration file. This file contains a <code class="docutils literal"><span class="pre">providers</span></code> array where you can list the names of your service providers. By default, a set of Laravel core service providers are listed in this array. These providers bootstrap the core Laravel components, such as the mailer, queue, cache, and others.</p>
<p>To register your provider, simply add it to the array:</p>
<pre class="literal-block">
'providers' =&gt; [
    // Other Service Providers

    App\Providers\AppServiceProvider::class,
],
</pre>
<p><a name="deferred-providers"></a></p>
</div>
<div class="section" id="deferred-providers">
<span id="deferred-providers"></span><h2>Deferred Providers<a class="headerlink" href="#deferred-providers" title="Permalink to this headline">¶</a></h2>
<p>If your provider is <strong>only</strong> registering bindings in the <a class="reference external" href="/docs/{{version}}/container">service container</a>, you may choose to defer its registration until one of the registered bindings is actually needed. Deferring the loading of such a provider will improve the performance of your application, since it is not loaded from the filesystem on every request.</p>
<p>To defer the loading of a provider, set the <code class="docutils literal"><span class="pre">defer</span></code> property to <code class="docutils literal"><span class="pre">true</span></code> and define a <code class="docutils literal"><span class="pre">provides</span></code> method. The <code class="docutils literal"><span class="pre">provides</span></code> method returns the service container bindings that the provider registers:</p>
<pre class="literal-block">
&lt;?php

namespace App\Providers;

use Riak\Connection;
use Illuminate\Support\ServiceProvider;

class RiakServiceProvider extends ServiceProvider
{
    /**
     * Indicates if loading of the provider is deferred.
     *
     * &#64;var bool
     */
    protected $defer = true;

    /**
     * Register the service provider.
     *
     * &#64;return void
     */
    public function register()
    {
        $this-&gt;app-&gt;singleton('Riak\Contracts\Connection', function ($app) {
            return new Connection($app['config']['riak']);
        });
    }

    /**
     * Get the services provided by the provider.
     *
     * &#64;return array
     */
    public function provides()
    {
        return ['Riak\Contracts\Connection'];
    }

}
</pre>
<p>Laravel compiles and stores a list of all of the services supplied by deferred service providers, along with the name of its service provider class. Then, only when you attempt to resolve one of these services does Laravel load the service provider.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, The Weezqyd.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>