

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Database: Migrations &mdash; Laravel 5 Documentation 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Laravel 5 Documentation 1.0 documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Laravel 5 Documentation
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <!-- Local TOC -->
                <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Database: Migrations</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#generating-migrations">Generating Migrations</a></li>
<li><a class="reference internal" href="#migration-structure">Migration Structure</a></li>
<li><a class="reference internal" href="#running-migrations">Running Migrations</a><ul>
<li><a class="reference internal" href="#forcing-migrations-to-run-in-production">Forcing Migrations To Run In Production</a></li>
<li><a class="reference internal" href="#rolling-back-migrations">Rolling Back Migrations</a><ul>
<li><a class="reference internal" href="#rollback-migrate-in-single-command">Rollback / Migrate In Single Command</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#writing-migrations">Writing Migrations</a><ul>
<li><a class="reference internal" href="#creating-tables">Creating Tables</a><ul>
<li><a class="reference internal" href="#checking-for-table-column-existence">Checking For Table / Column Existence</a></li>
<li><a class="reference internal" href="#connection-storage-engine">Connection &amp; Storage Engine</a></li>
</ul>
</li>
<li><a class="reference internal" href="#renaming-dropping-tables">Renaming / Dropping Tables</a></li>
<li><a class="reference internal" href="#creating-columns">Creating Columns</a><ul>
<li><a class="reference internal" href="#available-column-types">Available Column Types</a></li>
<li><a class="reference internal" href="#column-modifiers">Column Modifiers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#modifying-columns">Modifying Columns</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#updating-column-attributes">Updating Column Attributes</a></li>
<li><a class="reference internal" href="#renaming-columns">Renaming Columns</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dropping-columns">Dropping Columns</a></li>
<li><a class="reference internal" href="#creating-indexes">Creating Indexes</a><ul>
<li><a class="reference internal" href="#available-index-types">Available Index Types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dropping-indexes">Dropping Indexes</a></li>
<li><a class="reference internal" href="#foreign-key-constraints">Foreign Key Constraints</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Laravel 5 Documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Database: Migrations</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/migrations.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="database-migrations">
<span id="database-migrations"></span><h1>Database: Migrations<a class="headerlink" href="#database-migrations" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="#introduction">Introduction</a></li>
<li><a class="reference external" href="#generating-migrations">Generating Migrations</a></li>
<li><a class="reference external" href="#migration-structure">Migration Structure</a></li>
<li><a class="reference external" href="#running-migrations">Running Migrations</a><ul>
<li><a class="reference external" href="#rolling-back-migrations">Rolling Back Migrations</a></li>
</ul>
</li>
<li><a class="reference external" href="#writing-migrations">Writing Migrations</a><ul>
<li><a class="reference external" href="#creating-tables">Creating Tables</a></li>
<li><a class="reference external" href="#renaming-and-dropping-tables">Renaming / Dropping Tables</a></li>
<li><a class="reference external" href="#creating-columns">Creating Columns</a></li>
<li><a class="reference external" href="#modifying-columns">Modifying Columns</a></li>
<li><a class="reference external" href="#dropping-columns">Dropping Columns</a></li>
<li><a class="reference external" href="#creating-indexes">Creating Indexes</a></li>
<li><a class="reference external" href="#dropping-indexes">Dropping Indexes</a></li>
<li><a class="reference external" href="#foreign-key-constraints">Foreign Key Constraints</a></li>
</ul>
</li>
</ul>
<p><a name="introduction"></a></p>
<div class="section" id="introduction">
<span id="introduction"></span><h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Migrations are like version control for your database, allowing a team to easily modify and share the application&#8217;s database schema. Migrations are typically paired with Laravel&#8217;s schema builder to easily build your application&#8217;s database schema.</p>
<p>The Laravel <code class="docutils literal"><span class="pre">Schema</span></code> <a class="reference external" href="/docs/{{version}}/facades">facade</a> provides database agnostic support for creating and manipulating tables. It shares the same expressive, fluent API across all of Laravel&#8217;s supported database systems.</p>
<p><a name="generating-migrations"></a></p>
</div>
<div class="section" id="generating-migrations">
<span id="generating-migrations"></span><h2>Generating Migrations<a class="headerlink" href="#generating-migrations" title="Permalink to this headline">¶</a></h2>
<p>To create a migration, use the <code class="docutils literal"><span class="pre">make:migration</span></code> <a class="reference external" href="/docs/{{version}}/artisan">Artisan command</a>:</p>
<pre class="literal-block">
php artisan make:migration create_users_table
</pre>
<p>The new migration will be placed in your <code class="docutils literal"><span class="pre">database/migrations</span></code> directory. Each migration file name contains a timestamp which allows Laravel to determine the order of the migrations.</p>
<p>The <code class="docutils literal"><span class="pre">--table</span></code> and <code class="docutils literal"><span class="pre">--create</span></code> options may also be used to indicate the name of the table and whether the migration will be creating a new table. These options simply pre-fill the generated migration stub file with the specified table:</p>
<pre class="literal-block">
php artisan make:migration add_votes_to_users_table --table=users

php artisan make:migration create_users_table --create=users
</pre>
<p>If you would like to specify a custom output path for the generated migration, you may use the <code class="docutils literal"><span class="pre">--path</span></code> option when executing the <code class="docutils literal"><span class="pre">make:migration</span></code> command. The provided path should be relative to your application&#8217;s base path.</p>
<p><a name="migration-structure"></a></p>
</div>
<div class="section" id="migration-structure">
<span id="migration-structure"></span><h2>Migration Structure<a class="headerlink" href="#migration-structure" title="Permalink to this headline">¶</a></h2>
<p>A migration class contains two methods: <code class="docutils literal"><span class="pre">up</span></code> and <code class="docutils literal"><span class="pre">down</span></code>. The <code class="docutils literal"><span class="pre">up</span></code> method is used to add new tables, columns, or indexes to your database, while the <code class="docutils literal"><span class="pre">down</span></code> method should simply reverse the operations performed by the <code class="docutils literal"><span class="pre">up</span></code> method.</p>
<p>Within both of these methods you may use the Laravel schema builder to expressively create and modify tables. To learn about all of the methods available on the <code class="docutils literal"><span class="pre">Schema</span></code> builder, <a class="reference external" href="#creating-tables">check out its documentation</a>. For example, let&#8217;s look at a sample migration that creates a <code class="docutils literal"><span class="pre">flights</span></code> table:</p>
<pre class="literal-block">
&lt;?php

use Illuminate\Database\Schema\Blueprint;
use Illuminate\Database\Migrations\Migration;

class CreateFlightsTable extends Migration
{
    /**
     * Run the migrations.
     *
     * &#64;return void
     */
    public function up()
    {
        Schema::create('flights', function (Blueprint $table) {
            $table-&gt;increments('id');
            $table-&gt;string('name');
            $table-&gt;string('airline');
            $table-&gt;timestamps();
        });
    }

    /**
     * Reverse the migrations.
     *
     * &#64;return void
     */
    public function down()
    {
        Schema::drop('flights');
    }
}
</pre>
<p><a name="running-migrations"></a></p>
</div>
<div class="section" id="running-migrations">
<span id="running-migrations"></span><h2>Running Migrations<a class="headerlink" href="#running-migrations" title="Permalink to this headline">¶</a></h2>
<p>To run all outstanding migrations for your application, use the <code class="docutils literal"><span class="pre">migrate</span></code> Artisan command. If you are using the <a class="reference external" href="/docs/{{version}}/homestead">Homestead virtual machine</a>, you should run this command from within your VM:</p>
<pre class="literal-block">
php artisan migrate
</pre>
<p>If you receive a &#8220;class not found&#8221; error when running migrations, try running the <code class="docutils literal"><span class="pre">composer</span> <span class="pre">dump-autoload</span></code> command and re-issuing the migrate command.</p>
<div class="section" id="forcing-migrations-to-run-in-production">
<span id="forcing-migrations-to-run-in-production"></span><h3>Forcing Migrations To Run In Production<a class="headerlink" href="#forcing-migrations-to-run-in-production" title="Permalink to this headline">¶</a></h3>
<p>Some migration operations are destructive, meaning they may cause you to lose data. In order to protect you from running these commands against your production database, you will be prompted for confirmation before these commands are executed. To force the commands to run without a prompt, use the <code class="docutils literal"><span class="pre">--force</span></code> flag:</p>
<pre class="literal-block">
php artisan migrate --force
</pre>
<p><a name="rolling-back-migrations"></a></p>
</div>
<div class="section" id="rolling-back-migrations">
<span id="rolling-back-migrations"></span><h3>Rolling Back Migrations<a class="headerlink" href="#rolling-back-migrations" title="Permalink to this headline">¶</a></h3>
<p>To rollback the latest migration &#8220;operation&#8221;, you may use the <code class="docutils literal"><span class="pre">rollback</span></code> command. Note that this rolls back the last &#8220;batch&#8221; of migrations that ran, which may include multiple migration files:</p>
<pre class="literal-block">
php artisan migrate:rollback
</pre>
<p>The <code class="docutils literal"><span class="pre">migrate:reset</span></code> command will roll back all of your application&#8217;s migrations:</p>
<pre class="literal-block">
php artisan migrate:reset
</pre>
<div class="section" id="rollback-migrate-in-single-command">
<span id="rollback-migrate-in-single-command"></span><h4>Rollback / Migrate In Single Command<a class="headerlink" href="#rollback-migrate-in-single-command" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">migrate:refresh</span></code> command will first roll back all of your database migrations, and then run the <code class="docutils literal"><span class="pre">migrate</span></code> command. This command effectively re-creates your entire database:</p>
<pre class="literal-block">
php artisan migrate:refresh

php artisan migrate:refresh --seed
</pre>
<p><a name="writing-migrations"></a></p>
</div>
</div>
</div>
<div class="section" id="writing-migrations">
<span id="writing-migrations"></span><h2>Writing Migrations<a class="headerlink" href="#writing-migrations" title="Permalink to this headline">¶</a></h2>
<p><a name="creating-tables"></a></p>
<div class="section" id="creating-tables">
<span id="creating-tables"></span><h3>Creating Tables<a class="headerlink" href="#creating-tables" title="Permalink to this headline">¶</a></h3>
<p>To create a new database table, use the <code class="docutils literal"><span class="pre">create</span></code> method on the <code class="docutils literal"><span class="pre">Schema</span></code> facade. The <code class="docutils literal"><span class="pre">create</span></code> method accepts two arguments. The first is the name of the table, while the second is a <code class="docutils literal"><span class="pre">Closure</span></code> which receives a <code class="docutils literal"><span class="pre">Blueprint</span></code> object used to define the new table:</p>
<pre class="literal-block">
Schema::create('users', function ($table) {
    $table-&gt;increments('id');
});
</pre>
<p>Of course, when creating the table, you may use any of the schema builder&#8217;s <a class="reference external" href="#creating-columns">column methods</a> to define the table&#8217;s columns.</p>
<div class="section" id="checking-for-table-column-existence">
<span id="checking-for-table-column-existence"></span><h4>Checking For Table / Column Existence<a class="headerlink" href="#checking-for-table-column-existence" title="Permalink to this headline">¶</a></h4>
<p>You may easily check for the existence of a table or column using the <code class="docutils literal"><span class="pre">hasTable</span></code> and <code class="docutils literal"><span class="pre">hasColumn</span></code> methods:</p>
<pre class="literal-block">
if (Schema::hasTable('users')) {
    //
}

if (Schema::hasColumn('users', 'email')) {
    //
}
</pre>
</div>
<div class="section" id="connection-storage-engine">
<span id="connection-storage-engine"></span><h4>Connection &amp; Storage Engine<a class="headerlink" href="#connection-storage-engine" title="Permalink to this headline">¶</a></h4>
<p>If you want to perform a schema operation on a database connection that is not your default connection, use the <code class="docutils literal"><span class="pre">connection</span></code> method:</p>
<pre class="literal-block">
Schema::connection('foo')-&gt;create('users', function ($table) {
    $table-&gt;increments('id');
});
</pre>
<p>To set the storage engine for a table, set the <code class="docutils literal"><span class="pre">engine</span></code> property on the schema builder:</p>
<pre class="literal-block">
Schema::create('users', function ($table) {
    $table-&gt;engine = 'InnoDB';

    $table-&gt;increments('id');
});
</pre>
<p><a name="renaming-and-dropping-tables"></a></p>
</div>
</div>
<div class="section" id="renaming-dropping-tables">
<span id="renaming-dropping-tables"></span><h3>Renaming / Dropping Tables<a class="headerlink" href="#renaming-dropping-tables" title="Permalink to this headline">¶</a></h3>
<p>To rename an existing database table, use the <code class="docutils literal"><span class="pre">rename</span></code> method:</p>
<pre class="literal-block">
Schema::rename($from, $to);
</pre>
<p>To drop an existing table, you may use the <code class="docutils literal"><span class="pre">drop</span></code> or <code class="docutils literal"><span class="pre">dropIfExists</span></code> methods:</p>
<pre class="literal-block">
Schema::drop('users');

Schema::dropIfExists('users');
</pre>
<p><a name="creating-columns"></a></p>
</div>
<div class="section" id="creating-columns">
<span id="creating-columns"></span><h3>Creating Columns<a class="headerlink" href="#creating-columns" title="Permalink to this headline">¶</a></h3>
<p>To update an existing table, we will use the <code class="docutils literal"><span class="pre">table</span></code> method on the <code class="docutils literal"><span class="pre">Schema</span></code> facade. Like the <code class="docutils literal"><span class="pre">create</span></code> method, the <code class="docutils literal"><span class="pre">table</span></code> method accepts two arguments: the name of the table and a <code class="docutils literal"><span class="pre">Closure</span></code> that receives a <code class="docutils literal"><span class="pre">Blueprint</span></code> instance we can use to add columns to the table:</p>
<pre class="literal-block">
Schema::table('users', function ($table) {
    $table-&gt;string('email');
});
</pre>
<div class="section" id="available-column-types">
<span id="available-column-types"></span><h4>Available Column Types<a class="headerlink" href="#available-column-types" title="Permalink to this headline">¶</a></h4>
<p>Of course, the schema builder contains a variety of column types that you may use when building your tables:</p>
<p>Command  | Description
&#8212;&#8212;&#8212;&#8212;- | &#8212;&#8212;&#8212;&#8212;-
<code class="docutils literal"><span class="pre">$table-&gt;bigIncrements('id');</span></code>  |  Incrementing ID (primary key) using a &#8220;UNSIGNED BIG INTEGER&#8221; equivalent.
<code class="docutils literal"><span class="pre">$table-&gt;bigInteger('votes');</span></code>  |  BIGINT equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;binary('data');</span></code>  |  BLOB equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;boolean('confirmed');</span></code>  |  BOOLEAN equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;char('name',</span> <span class="pre">4);</span></code>  |  CHAR equivalent with a length.
<code class="docutils literal"><span class="pre">$table-&gt;date('created_at');</span></code>  |  DATE equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;dateTime('created_at');</span></code>  |  DATETIME equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;decimal('amount',</span> <span class="pre">5,</span> <span class="pre">2);</span></code>  |  DECIMAL equivalent with a precision and scale.
<code class="docutils literal"><span class="pre">$table-&gt;double('column',</span> <span class="pre">15,</span> <span class="pre">8);</span></code>  |  DOUBLE equivalent with precision, 15 digits in total and 8 after the decimal point.
<code class="docutils literal"><span class="pre">$table-&gt;enum('choices',</span> <span class="pre">['foo',</span> <span class="pre">'bar']);</span></code> | ENUM equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;float('amount');</span></code>  |  FLOAT equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;increments('id');</span></code>  |  Incrementing ID (primary key) using a &#8220;UNSIGNED INTEGER&#8221; equivalent.
<code class="docutils literal"><span class="pre">$table-&gt;integer('votes');</span></code>  |  INTEGER equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;json('options');</span></code>  |  JSON equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;jsonb('options');</span></code>  |  JSONB equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;longText('description');</span></code>  |  LONGTEXT equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;mediumInteger('numbers');</span></code>  |  MEDIUMINT equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;mediumText('description');</span></code>  |  MEDIUMTEXT equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;morphs('taggable');</span></code>  |  Adds INTEGER <code class="docutils literal"><span class="pre">taggable_id</span></code> and STRING <code class="docutils literal"><span class="pre">taggable_type</span></code>.
<code class="docutils literal"><span class="pre">$table-&gt;nullableTimestamps();</span></code>  |  Same as <code class="docutils literal"><span class="pre">timestamps()</span></code>, except allows NULLs.
<code class="docutils literal"><span class="pre">$table-&gt;rememberToken();</span></code>  |  Adds <code class="docutils literal"><span class="pre">remember_token</span></code> as VARCHAR(100) NULL.
<code class="docutils literal"><span class="pre">$table-&gt;smallInteger('votes');</span></code>  |  SMALLINT equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;softDeletes();</span></code>  |  Adds <code class="docutils literal"><span class="pre">deleted_at</span></code> column for soft deletes.
<code class="docutils literal"><span class="pre">$table-&gt;string('email');</span></code>  |  VARCHAR equivalent column.
<code class="docutils literal"><span class="pre">$table-&gt;string('name',</span> <span class="pre">100);</span></code>  |  VARCHAR equivalent with a length.
<code class="docutils literal"><span class="pre">$table-&gt;text('description');</span></code>  |  TEXT equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;time('sunrise');</span></code>  |  TIME equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;tinyInteger('numbers');</span></code>  |  TINYINT equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;timestamp('added_on');</span></code>  |  TIMESTAMP equivalent for the database.
<code class="docutils literal"><span class="pre">$table-&gt;timestamps();</span></code>  |  Adds <code class="docutils literal"><span class="pre">created_at</span></code> and <code class="docutils literal"><span class="pre">updated_at</span></code> columns.</p>
</div>
<div class="section" id="column-modifiers">
<span id="column-modifiers"></span><h4>Column Modifiers<a class="headerlink" href="#column-modifiers" title="Permalink to this headline">¶</a></h4>
<p>In addition to the column types listed above, there are several other column &#8220;modifiers&#8221; which you may use while adding the column. For example, to make the column &#8220;nullable&#8221;, you may use the <code class="docutils literal"><span class="pre">nullable</span></code> method:</p>
<pre class="literal-block">
Schema::table('users', function ($table) {
    $table-&gt;string('email')-&gt;nullable();
});
</pre>
<p>Below is a list of all the available column modifiers. This list does not include the <a class="reference external" href="#creating-indexes">index modifiers</a>:</p>
<p>Modifier  | Description
&#8212;&#8212;&#8212;&#8212;- | &#8212;&#8212;&#8212;&#8212;-
<code class="docutils literal"><span class="pre">-&gt;first()</span></code>  |  Place the column &#8220;first&#8221; in the table (MySQL Only)
<code class="docutils literal"><span class="pre">-&gt;after('column')</span></code>  |  Place the column &#8220;after&#8221; another column (MySQL Only)
<code class="docutils literal"><span class="pre">-&gt;nullable()</span></code>  |  Allow NULL values to be inserted into the column
<code class="docutils literal"><span class="pre">-&gt;default($value)</span></code>  |  Specify a &#8220;default&#8221; value for the column
<code class="docutils literal"><span class="pre">-&gt;unsigned()</span></code>  |  Set <code class="docutils literal"><span class="pre">integer</span></code> columns to <code class="docutils literal"><span class="pre">UNSIGNED</span></code></p>
<p><a name="changing-columns"></a>
<a name="modifying-columns"></a></p>
</div>
</div>
<div class="section" id="modifying-columns">
<span id="modifying-columns"></span><h3>Modifying Columns<a class="headerlink" href="#modifying-columns" title="Permalink to this headline">¶</a></h3>
<div class="section" id="prerequisites">
<span id="prerequisites"></span><h4>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h4>
<p>Before modifying a column, be sure to add the <code class="docutils literal"><span class="pre">doctrine/dbal</span></code> dependency to your <code class="docutils literal"><span class="pre">composer.json</span></code> file. The Doctrine DBAL library is used to determine the current state of the column and create the SQL queries needed to make the specified adjustments to the column.</p>
</div>
<div class="section" id="updating-column-attributes">
<span id="updating-column-attributes"></span><h4>Updating Column Attributes<a class="headerlink" href="#updating-column-attributes" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">change</span></code> method allows you to modify an existing column to a new type, or modify the column&#8217;s attributes. For example, you may wish to increase the size of a string column. To see the <code class="docutils literal"><span class="pre">change</span></code> method in action, let&#8217;s increase the size of the <code class="docutils literal"><span class="pre">name</span></code> column from 25 to 50:</p>
<pre class="literal-block">
Schema::table('users', function ($table) {
    $table-&gt;string('name', 50)-&gt;change();
});
</pre>
<p>We could also modify a column to be nullable:</p>
<pre class="literal-block">
Schema::table('users', function ($table) {
    $table-&gt;string('name', 50)-&gt;nullable()-&gt;change();
});
</pre>
<p><a name="renaming-columns"></a></p>
</div>
<div class="section" id="renaming-columns">
<span id="renaming-columns"></span><h4>Renaming Columns<a class="headerlink" href="#renaming-columns" title="Permalink to this headline">¶</a></h4>
<p>To rename a column, you may use the <code class="docutils literal"><span class="pre">renameColumn</span></code> method on the Schema builder. Before renaming a column, be sure to add the <code class="docutils literal"><span class="pre">doctrine/dbal</span></code> dependency to your <code class="docutils literal"><span class="pre">composer.json</span></code> file:</p>
<pre class="literal-block">
Schema::table('users', function ($table) {
    $table-&gt;renameColumn('from', 'to');
});
</pre>
<blockquote>
<div><strong>Note:</strong> Renaming columns in a table with a <code class="docutils literal"><span class="pre">enum</span></code> column is not currently supported.</div></blockquote>
<p><a name="dropping-columns"></a></p>
</div>
</div>
<div class="section" id="dropping-columns">
<span id="dropping-columns"></span><h3>Dropping Columns<a class="headerlink" href="#dropping-columns" title="Permalink to this headline">¶</a></h3>
<p>To drop a column, use the <code class="docutils literal"><span class="pre">dropColumn</span></code> method on the Schema builder:</p>
<pre class="literal-block">
Schema::table('users', function ($table) {
    $table-&gt;dropColumn('votes');
});
</pre>
<p>You may drop multiple columns from a table by passing an array of column names to the <code class="docutils literal"><span class="pre">dropColumn</span></code> method:</p>
<pre class="literal-block">
Schema::table('users', function ($table) {
    $table-&gt;dropColumn(['votes', 'avatar', 'location']);
});
</pre>
<blockquote>
<div><strong>Note:</strong> Before dropping columns from a SQLite database, you will need to add the <code class="docutils literal"><span class="pre">doctrine/dbal</span></code> dependency to your <code class="docutils literal"><span class="pre">composer.json</span></code> file and run the <code class="docutils literal"><span class="pre">composer</span> <span class="pre">update</span></code> command in your terminal to install the library.</div></blockquote>
<p><a name="creating-indexes"></a></p>
</div>
<div class="section" id="creating-indexes">
<span id="creating-indexes"></span><h3>Creating Indexes<a class="headerlink" href="#creating-indexes" title="Permalink to this headline">¶</a></h3>
<p>The schema builder supports several types of indexes. First, let&#8217;s look at an example that specifies a column&#8217;s values should be unique. To create the index, we can simply chain the <code class="docutils literal"><span class="pre">unique</span></code> method onto the column definition:</p>
<pre class="literal-block">
$table-&gt;string('email')-&gt;unique();
</pre>
<p>Alternatively, you may create the index after defining the column. For example:</p>
<pre class="literal-block">
$table-&gt;unique('email');
</pre>
<p>You may even pass an array of columns to an index method to create a compound index:</p>
<pre class="literal-block">
$table-&gt;index(['account_id', 'created_at']);
</pre>
<div class="section" id="available-index-types">
<span id="available-index-types"></span><h4>Available Index Types<a class="headerlink" href="#available-index-types" title="Permalink to this headline">¶</a></h4>
<p>Command  | Description
&#8212;&#8212;&#8212;&#8212;- | &#8212;&#8212;&#8212;&#8212;-
<code class="docutils literal"><span class="pre">$table-&gt;primary('id');</span></code>  |  Add a primary key.
<code class="docutils literal"><span class="pre">$table-&gt;primary(['first',</span> <span class="pre">'last']);</span></code>  |  Add composite keys.
<code class="docutils literal"><span class="pre">$table-&gt;unique('email');</span></code>  |  Add a unique index.
<code class="docutils literal"><span class="pre">$table-&gt;index('state');</span></code>  |  Add a basic index.</p>
<p><a name="dropping-indexes"></a></p>
</div>
</div>
<div class="section" id="dropping-indexes">
<span id="dropping-indexes"></span><h3>Dropping Indexes<a class="headerlink" href="#dropping-indexes" title="Permalink to this headline">¶</a></h3>
<p>To drop an index, you must specify the index&#8217;s name. By default, Laravel automatically assigns a reasonable name to the indexes. Simply concatenate the table name, the name of the indexed column, and the index type. Here are some examples:</p>
<p>Command  | Description
&#8212;&#8212;&#8212;&#8212;- | &#8212;&#8212;&#8212;&#8212;-
<code class="docutils literal"><span class="pre">$table-&gt;dropPrimary('users_id_primary');</span></code>  |  Drop a primary key from the &#8220;users&#8221; table.
<code class="docutils literal"><span class="pre">$table-&gt;dropUnique('users_email_unique');</span></code>  |  Drop a unique index from the &#8220;users&#8221; table.
<code class="docutils literal"><span class="pre">$table-&gt;dropIndex('geo_state_index');</span></code>  |  Drop a basic index from the &#8220;geo&#8221; table.</p>
<p><a name="foreign-key-constraints"></a></p>
</div>
<div class="section" id="foreign-key-constraints">
<span id="foreign-key-constraints"></span><h3>Foreign Key Constraints<a class="headerlink" href="#foreign-key-constraints" title="Permalink to this headline">¶</a></h3>
<p>Laravel also provides support for creating foreign key constraints, which are used to force referential integrity at the database level. For example, let&#8217;s define a <code class="docutils literal"><span class="pre">user_id</span></code> column on the <code class="docutils literal"><span class="pre">posts</span></code> table that references the <code class="docutils literal"><span class="pre">id</span></code> column on a <code class="docutils literal"><span class="pre">users</span></code> table:</p>
<pre class="literal-block">
Schema::table('posts', function ($table) {
    $table-&gt;integer('user_id')-&gt;unsigned();

    $table-&gt;foreign('user_id')-&gt;references('id')-&gt;on('users');
});
</pre>
<p>You may also specify the desired action for the &#8220;on delete&#8221; and &#8220;on update&#8221; properties of the constraint:</p>
<pre class="literal-block">
$table-&gt;foreign('user_id')
      -&gt;references('id')-&gt;on('users')
      -&gt;onDelete('cascade');
</pre>
<p>To drop a foreign key, you may use the <code class="docutils literal"><span class="pre">dropForeign</span></code> method. Foreign key constraints use the same naming convention as indexes. So, we will concatenate the table name and the columns in the constraint then suffix the name with &#8220;_foreign&#8221;:</p>
<pre class="literal-block">
$table-&gt;dropForeign('posts_user_id_foreign');
</pre>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, The Weezqyd.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>